<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="æ¦‚è¿°Reactæ˜¯ç”±Facebookä¸»å¯¼å¼€å‘çš„JavaScriptæ¡†æ¶ï¼Œå’Œä¹‹å‰æµè¡Œè¿‡çš„MVVMæ¡†æ¶ä¾‹å¦‚Angularä¸åŒï¼ŒReacåªä¸“æ³¨MVCä¸­çš„Vï¼ˆè§†å›¾å±‚ï¼‰ï¼Œä¼˜ç‚¹åœ¨äºè½»ã€å—ã€å¹¶ä¸”ç»„ä»¶åŒ–çš„æ€æƒ³åœ¨æ„å»ºå¼€å‘ç”¨æˆ·ç•Œé¢æ—¶æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚Reactè§„èŒƒåŒ–çš„ä»£ç é£æ ¼ï¼Œèƒ½å‡å°‘æ¯ä¸ªå¼€å‘è€…å¼€å‘å‡ºæ¥çš„ä»£ç é£æ ¼çš„å·®å¼‚ï¼Œåœ¨å›¢é˜Ÿåä½œä¸­ç›Šå¤„æ˜¾è‘—ã€‚ å‰ç½®çŸ¥è¯†  JavaScriptåŸºç¡€ï¼ˆå˜é‡ï¼å¯¹è±¡ï¼å‡½æ•°ï¼‰ ES6 åŸºç¡€ ç†Ÿæ‚‰ HT">
<meta property="og:type" content="article">
<meta property="og:title" content="react">
<meta property="og:url" content="https://zhuayu.github.io/zhuayu.github.io/2017/10/16/react/index.html">
<meta property="og:site_name" content="JaxChu">
<meta property="og:description" content="æ¦‚è¿°Reactæ˜¯ç”±Facebookä¸»å¯¼å¼€å‘çš„JavaScriptæ¡†æ¶ï¼Œå’Œä¹‹å‰æµè¡Œè¿‡çš„MVVMæ¡†æ¶ä¾‹å¦‚Angularä¸åŒï¼ŒReacåªä¸“æ³¨MVCä¸­çš„Vï¼ˆè§†å›¾å±‚ï¼‰ï¼Œä¼˜ç‚¹åœ¨äºè½»ã€å—ã€å¹¶ä¸”ç»„ä»¶åŒ–çš„æ€æƒ³åœ¨æ„å»ºå¼€å‘ç”¨æˆ·ç•Œé¢æ—¶æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚Reactè§„èŒƒåŒ–çš„ä»£ç é£æ ¼ï¼Œèƒ½å‡å°‘æ¯ä¸ªå¼€å‘è€…å¼€å‘å‡ºæ¥çš„ä»£ç é£æ ¼çš„å·®å¼‚ï¼Œåœ¨å›¢é˜Ÿåä½œä¸­ç›Šå¤„æ˜¾è‘—ã€‚ å‰ç½®çŸ¥è¯†  JavaScriptåŸºç¡€ï¼ˆå˜é‡ï¼å¯¹è±¡ï¼å‡½æ•°ï¼‰ ES6 åŸºç¡€ ç†Ÿæ‚‰ HT">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2017-10-15T08:27:04.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="react">
<meta name="twitter:description" content="æ¦‚è¿°Reactæ˜¯ç”±Facebookä¸»å¯¼å¼€å‘çš„JavaScriptæ¡†æ¶ï¼Œå’Œä¹‹å‰æµè¡Œè¿‡çš„MVVMæ¡†æ¶ä¾‹å¦‚Angularä¸åŒï¼ŒReacåªä¸“æ³¨MVCä¸­çš„Vï¼ˆè§†å›¾å±‚ï¼‰ï¼Œä¼˜ç‚¹åœ¨äºè½»ã€å—ã€å¹¶ä¸”ç»„ä»¶åŒ–çš„æ€æƒ³åœ¨æ„å»ºå¼€å‘ç”¨æˆ·ç•Œé¢æ—¶æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚Reactè§„èŒƒåŒ–çš„ä»£ç é£æ ¼ï¼Œèƒ½å‡å°‘æ¯ä¸ªå¼€å‘è€…å¼€å‘å‡ºæ¥çš„ä»£ç é£æ ¼çš„å·®å¼‚ï¼Œåœ¨å›¢é˜Ÿåä½œä¸­ç›Šå¤„æ˜¾è‘—ã€‚ å‰ç½®çŸ¥è¯†  JavaScriptåŸºç¡€ï¼ˆå˜é‡ï¼å¯¹è±¡ï¼å‡½æ•°ï¼‰ ES6 åŸºç¡€ ç†Ÿæ‚‰ HT">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://zhuayu.github.io/zhuayu.github.io/2017/10/16/react/"/>





  <title>react | JaxChu</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JaxChu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Quick note</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'U5nsiDF5pEyJZwgfAFT5','2.0.0');
</script>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhuayu.github.io/zhuayu.github.io/2017/10/16/react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JaxChu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JaxChu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">react</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-16T00:23:15+08:00">
                2017-10-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Reactæ˜¯ç”±Facebookä¸»å¯¼å¼€å‘çš„JavaScriptæ¡†æ¶ï¼Œå’Œä¹‹å‰æµè¡Œè¿‡çš„MVVMæ¡†æ¶ä¾‹å¦‚Angularä¸åŒï¼ŒReacåªä¸“æ³¨MVCä¸­çš„Vï¼ˆè§†å›¾å±‚ï¼‰ï¼Œä¼˜ç‚¹åœ¨äºè½»ã€å—ã€å¹¶ä¸”ç»„ä»¶åŒ–çš„æ€æƒ³åœ¨æ„å»ºå¼€å‘ç”¨æˆ·ç•Œé¢æ—¶æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚Reactè§„èŒƒåŒ–çš„ä»£ç é£æ ¼ï¼Œèƒ½å‡å°‘æ¯ä¸ªå¼€å‘è€…å¼€å‘å‡ºæ¥çš„ä»£ç é£æ ¼çš„å·®å¼‚ï¼Œåœ¨å›¢é˜Ÿåä½œä¸­ç›Šå¤„æ˜¾è‘—ã€‚</p>
<p>å‰ç½®çŸ¥è¯†</p>
<ul>
<li>JavaScriptåŸºç¡€ï¼ˆå˜é‡ï¼å¯¹è±¡ï¼å‡½æ•°ï¼‰</li>
<li>ES6 åŸºç¡€</li>
<li>ç†Ÿæ‚‰ HTML</li>
<li>åŸºæœ¬æŒæ¡ CSS</li>
</ul>
<p>å‚è€ƒæ–‡æ¡£</p>
<ul>
<li><a href="https://facebook.github.io/react/docs/hello-world.html" target="_blank" rel="external">reactå®˜ç½‘</a><a id="more"></a>
</li>
</ul>
<h2 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h2><p><a href="https://nodejs.org/zh-cn/" target="_blank" rel="external">node</a> ç¯å¢ƒä¸‹è½½å®‰è£…ï¼Œå¦‚ç½‘é€Ÿè¾ƒæ…¢å¯å°è¯• <a href="https://yarnpkg.com/zh-Hans/" target="_blank" rel="external">yarn</a> æˆ–åˆ‡æ¢ <a href="http://npm.taobao.org/" target="_blank" rel="external">æ·˜å®é•œåƒ</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">npm install -g create-react-app</div><div class="line">create-react-app my-app</div><div class="line"></div><div class="line"><span class="built_in">cd</span> my-app</div><div class="line">npm start</div></pre></td></tr></table></figure>
<h2 id="ç»„å»ºå¼€å‘"><a href="#ç»„å»ºå¼€å‘" class="headerlink" title="ç»„å»ºå¼€å‘"></a>ç»„å»ºå¼€å‘</h2><h3 id="JSXå…¥é—¨"><a href="#JSXå…¥é—¨" class="headerlink" title="JSXå…¥é—¨"></a>JSXå…¥é—¨</h3><p>JSXæ˜¯åŸºäºJavaScriptåœ¨Reactå½“ä¸­çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œä¸æ˜¯å•çº¯çš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯æ¨¡ç‰ˆè¯­è¨€ï¼Œä¹Ÿä¸æ˜¯HTMLã€‚è¢«ç”¨äºåˆ›å»ºReactå½“ä¸­çš„Elementï¼Œé€šè¿‡Reactå½“ä¸­çš„æ–¹æ³•æ¸²æŸ“æˆDOMã€‚</p>
<p>é‡‡ç”¨JSXåŠES6è¯­æ³•çš„jsä»£ç éœ€è¦è½¬ç§»æ‰èƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå®é™…ç”Ÿäº§ä¸­ä¼šåˆ©ç”¨BABELä¹‹ç±»çš„è½¬è¯‘å™¨ï¼Œè½¬è¯‘æˆæµè§ˆå™¨å¯ä»¥ç›´æ¥è¿è¡Œçš„jsã€‚JSXåœ¨è½¬ç§»è¿‡ç¨‹ä¸­ï¼Œä¼šå˜æˆReact.creatElementçš„ä¸€ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­çš„æ ‡ç­¾è¯­è¨€éƒ½ä¼šè¢«è½¬åŒ–ä¸ºå‚æ•°ä¼ å…¥ ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//JSX</span></div><div class="line">ReactDOM.render(</div><div class="line">    &lt;p&gt;Hello world!&lt;/p&gt;,</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>)</div><div class="line">)</div><div class="line"><span class="comment">//BABEL</span></div><div class="line">React.createElement(<span class="string">'p'</span>,<span class="literal">null</span>,<span class="string">`Hello world!`</span>),</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<p>ç”¨JSXåˆ›å»ºçš„å…ƒç´ ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬é‡‡ç”¨constå…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªJSXå…ƒç´ ã€‚ï¼ˆ const å…³é”®å­—åœ¨ES6ä¸­è¢«ç”¨æ¥å£°æ˜ä¸€ä¸ªå¸¸é‡ï¼Œä½†è¿™é‡Œæ‰€è°“çš„å¸¸é‡å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­çš„æ¦‚å¿µç¨æœ‰ä¸åŒï¼Œå®ƒäº‹å®ä¸Šæ˜¯å£°æ˜ä¸€ä¸ªåªè¯»çš„æŒ‡é’ˆã€‚ </p>
<p>JSXä¸­çš„æ ‡ç­¾å¯ä»¥æºå¸¦å±æ€§ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥æ·»åŠ idï¼Œä½†æ˜¯å’ŒHTMLåˆä¸æ˜¯å®Œå…¨ç›¸åŒï¼Œä¸ºæ ‡ç­¾ä½¿ç”¨classçš„æ—¶å€™éœ€è¦æ·»åŠ classNameã€‚JSXæ”¯æŒçš„æ‰€æœ‰å±æ€§å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š<a href="https://facebook.github.io/react/docs/dom-elements.html#all-supported-html-attributes" target="_blank" rel="external">All Supported HTML Attributes</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> title = <span class="string">`&lt;h1 id="appTitle" className="h1-title"&gt;React Learning&lt;/h1&gt;`</span>;</div><div class="line">ReactDOM.render(title,<span class="built_in">document</span>.getElementById(<span class="string">'root'</span>);</div></pre></td></tr></table></figure>
<p>JSXçš„æ ‡ç­¾å¯ä»¥ç›¸äº’åµŒå¥—ï¼Œä½†åµŒå¥—æ—¶æœ€å¤–å±‚æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªæ ‡ç­¾ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> title = (</div><div class="line">    &lt;div&gt;</div><div class="line">        &lt;h1 id=<span class="string">"appTitle"</span> className=<span class="string">"h1-title"</span>&gt;React Learning&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">        &lt;p&gt;lets learn JSX&lt;/</span>p&gt;</div><div class="line">    &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp">ReactDOM.render(title,document.getElementById('root');</span></div></pre></td></tr></table></figure>
<p>JSXåˆ›å»ºçš„å…ƒç´ ä¸­å¯ä»¥ä½¿ç”¨jsè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼éœ€è¦ç”¨å¤§æ‹¬å·{}æ‹¬èµ·æ¥ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayhi</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">`Hi , <span class="subst">$&#123;name&#125;</span>`</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> title = (</div><div class="line">    &lt;div&gt;</div><div class="line">        &lt;h1 id=<span class="string">"appTitle"</span> className=<span class="string">"h1-title"</span>&gt;React Learning&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">        &lt;p&gt;&#123;sayhi('react')&#125;&lt;/</span>p&gt;</div><div class="line">    &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp">ReactDOM.render(title,document.getElementById('root');</span></div></pre></td></tr></table></figure>
<p>å°ç»“ï¼š</p>
<ul>
<li>JSXæ˜¯Reactå½“ä¸­å®ç°çš„ä¸€ç§æ‰©å±•è¯­æ³•</li>
<li>JSXæ—¢ä¸æ˜¯å­—ç¬¦ä¸²ä¹Ÿä¸æ˜¯HTML</li>
<li>é€šè¿‡JSXå¯ä»¥æ–¹ä¾¿çš„åœ¨Reactä¸­å£°æ˜å…ƒç´ </li>
<li>JSXå¯ä»¥é€šè¿‡Reactå½“ä¸­çš„æ–¹æ³•è¢«æ¸²æŸ“æˆé¡µé¢çš„DOM</li>
<li>JSXçš„æ ‡ç­¾å¯ä»¥æ‹¥æœ‰å±æ€§ï¼Œä½†ä¸HTMLä¸å®Œå…¨ç›¸åŒ</li>
<li>JSXçš„æ ‡ç­¾ä¹Ÿå¯ä»¥åƒHTMLä¸€æ ·ç›¸äº’åµŒå¥—ï¼Œä½†æœ€å¤–å±‚åªèƒ½æœ‰ä¸€ä¸ªæ ‡ç­¾</li>
<li>æˆ‘ä»¬å¯ä»¥åœ¨JSXå½“ä¸­ä½¿ç”¨JSè¡¨è¾¾å¼</li>
</ul>
<h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><h4 id="å…ƒç´ ä¸ç»„ä»¶-Element-amp-Component"><a href="#å…ƒç´ ä¸ç»„ä»¶-Element-amp-Component" class="headerlink" title="å…ƒç´ ä¸ç»„ä»¶ Element &amp; Component"></a>å…ƒç´ ä¸ç»„ä»¶ Element &amp; Component</h4><h5 id="Reactå…ƒç´ "><a href="#Reactå…ƒç´ " class="headerlink" title="Reactå…ƒç´ "></a>Reactå…ƒç´ </h5><p>å…ƒç´ æ˜¯æ„å»ºReactåº”ç”¨çš„æè¿°ç•Œé¢çš„æœ€å°å•ä½ï¼Œåœ¨ä½œç”¨ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æŠŠReactå…ƒç´ ç†è§£ä¸ºDOMå…ƒç´ ï¼Œä½†å®é™…ä¸­ï¼ŒReactå…ƒç´ åªæ˜¯jsä¸­æ™®é€šçš„å¯¹è±¡ã€‚åœ¨Reactå†…éƒ¨æœ‰ä¸€å¥—React DOMçš„æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºVirtual DOMï¼Œé€šè¿‡jsä¸­æ ‘çŠ¶ç»“æ„çš„å¯¹è±¡æ¥æ¨¡æ‹ŸçœŸå®DOMã€‚<br>Reactä¹‹æ‰€ä»¥è½»å’Œå¿«å°±æ˜¯å› ä¸ºè¿™è™šæ‹ŸDOMçš„å­˜åœ¨ï¼ŒReactå†…éƒ¨è¿˜å®è¡Œäº†ä¸€ä¸ªä½å¤æ‚åº¦é«˜æ•ˆç‡çš„Diffç®—æ³•ã€‚ä¸åŒäºä»¥å¾€çš„æ¡†æ¶å¦‚Angularä½¿ç”¨çš„è„æ£€æŸ¥ï¼Œåœ¨åº”ç”¨æ”¹ç‰ˆæ•°æ®çš„æ—¶å€™ï¼ŒReactä¼šå°½é‡è¿›è¡Œå°‘çš„æ¯”è¾ƒï¼Œç„¶åæ›´å…·è™šæ‹ŸDOMåªæ”¹å˜çœŸå®DOMå½“ä¸­éœ€è¦è¢«æ”¹å˜çš„éƒ¨åˆ†ã€‚<br>é€šè¿‡è¿™æˆå•ç‹¬æŠ½è±¡çš„é€»è¾‘ï¼Œè®©Reactæœ‰äº†æ— é™çš„å¯èƒ½ï¼Œä¾‹å¦‚ReactNativeã€ReactVRã€ReactXPçš„å®ç°ã€‚</p>
<h5 id="ç»„ä»¶-1"><a href="#ç»„ä»¶-1" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h5><p>ç»„ä»¶æ˜¯å¯ä»¥è®²UIåˆ‡åˆ†ç§°ä¸ºä¸€äº›ç‹¬ç«‹çš„ã€å¯æœç”¨çš„éƒ¨åˆ†ï¼Œç±»ä¼¼äºjså½“ä¸­å¯¹functionå‡½æ•°çš„å®šä¹‰ã€‚</p>
<h4 id="å‡½æ•°å®šä¹‰ä¸ç±»å®šä¹‰ç»„ä»¶-Functional-amp-Class"><a href="#å‡½æ•°å®šä¹‰ä¸ç±»å®šä¹‰ç»„ä»¶-Functional-amp-Class" class="headerlink" title="å‡½æ•°å®šä¹‰ä¸ç±»å®šä¹‰ç»„ä»¶ Functional &amp; Class"></a>å‡½æ•°å®šä¹‰ä¸ç±»å®šä¹‰ç»„ä»¶ Functional &amp; Class</h4><p>æ–°ç‰ˆæœ¬çš„Reacté‡Œæä¾›äº†ä¸¤ç§å®šä¹‰ç»„ä»¶çš„æ–¹æ³•</p>
<ul>
<li>é€šè¿‡JSçš„functionæ¥å®šä¹‰ç»„ä»¶</li>
<li>é€šè¿‡ES6ä¸­çš„classæ¥å®šä¹‰ç»„ä»¶</li>
</ul>
<p>å‡½æ•°å®šä¹‰ç»„ä»¶éœ€è¦å®šä¹‰ä¸€ä¸ªæ¥æ”¶propsä½œä¸ºå‚æ•°ï¼Œè¿”å›reactå…ƒç´ çš„æ–¹æ³•å³å¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> Title = <span class="function">(<span class="params">props</span>) =&gt;</span> &lt;h1&gt;hello,&#123;props.name&#125;&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">ReactDOM.render(&lt;Title name='react' /</span>&gt;,</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>ç±»å®šä¹‰ç»„ä»¶ä½¿ç”¨ES6ä¸­classç±»çš„æ–¹æ³•æ¥å®šä¹‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Title</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> &lt;h1&gt;hello,&#123;props.name&#125;&lt;/h1&gt;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">ReactDOM.render(&lt;Title name='react' /&gt;,</div><div class="line">    document.getElementById('app')</div><div class="line">);</div></pre></td></tr></table></figure>
<h4 id="å±•ç¤ºä¸å®¹å™¨ç»„ä»¶-Presentational-amp-Container"><a href="#å±•ç¤ºä¸å®¹å™¨ç»„ä»¶-Presentational-amp-Container" class="headerlink" title="å±•ç¤ºä¸å®¹å™¨ç»„ä»¶ Presentational &amp; Container"></a>å±•ç¤ºä¸å®¹å™¨ç»„ä»¶ Presentational &amp; Container</h4><ul>
<li>å±•ç¤ºç»„ä»¶ä¸»è¦è´Ÿè´£ç»„ä»¶å†…å®¹å¦‚ä½•å±•ç¤ºï¼Œæ•°æ®æ¥è‡ªpropsæˆ–è€…ä¸æ•°æ®æ— å…³çš„stateï¼Œå¤§å¤šæƒ…å†µä½¿ç”¨å‡½æ•°å£°æ˜ç»„ä»¶</li>
<li>å®¹å™¨ç»„ä»¶ä¸»è¦å…³æ³¨æ•°æ®å¦‚ä½•äº¤äº’ï¼Œæ•°æ®æ¥è‡ªstateå’Œåç«¯ï¼Œå¤šæ•°ä½¿ç”¨classç±»å£°æ˜ç»„ä»¶</li>
</ul>
<p>â˜¹ï¸ no well ï¼Œè¿™ç±»ç»„ä»¶è´Ÿæ‹…çš„åŠŸèƒ½å¤ªå¤šäº†ï¼Œä»–åªæ˜¯ä¸€ä¸ªå•ä¸€çš„ç»„ä»¶ï¼ŒåŒæ—¶éœ€è¦åˆå§‹åŒ–stateï¼Œé€šè¿‡ajaxè·å–æœåŠ¡å™¨æ•°æ®ï¼Œæ¸²æŸ“åˆ—è¡¨å†…å®¹ã€‚åœ¨å®é™…å¼•ç”¨ä¸­å¯èƒ½è¿˜ä¼šæœ‰æ›´å¤šçš„åŠŸèƒ½ä¾èµ–ï¼Œåœ¨åç»­æ— è®ºè¦ä¿®æ”¹æ ·å¼å†…å®¹ã€æœåŠ¡å™¨äº¤äº’éƒ½éœ€è¦ä¿®æ”¹åŒä¸€ä¸ªç»„ä»¶ï¼Œé€»è¾‘ä¸¥é‡çš„è€¦åˆã€‚å¦‚æœåŠŸèƒ½åœ¨åŒä¸€ä¸ªç»„ä»¶ç»´æŠ¤ï¼Œä¹Ÿä¸åˆ©äºå›¢é˜Ÿé—´çš„åä½œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">    contructor(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">        <span class="keyword">this</span>.state = &#123;</div><div class="line">            comments:[]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    componentDidMount() &#123;</div><div class="line">        $.ajax(&#123;</div><div class="line">            url:<span class="string">'my-contents.json'</span>,</div><div class="line">            dataType:<span class="string">'json'</span>,</div><div class="line">            sucess:<span class="function"><span class="keyword">function</span>(<span class="params">comments</span>)</span>&#123;</div><div class="line">                <span class="keyword">this</span>.setState(&#123;</div><div class="line">                    coments:coments</div><div class="line">                &#125;)</div><div class="line">            &#125;.bind(<span class="keyword">this</span>)</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    renderComment(&#123;body,author&#125;) &#123;</div><div class="line">        <span class="keyword">return</span> &lt;li&gt;&#123;body&#125;-&#123;author&#125;&lt;/li&gt;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        renturn &lt;ul&gt;&#123;<span class="keyword">this</span>.state.comments.map(<span class="keyword">this</span>.renderComment)&#125;&lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">    </span></div><div class="line"><span class="regexp">&#125;</span></div></pre></td></tr></table></figure>
<p>ğŸ˜Š good , åŒºåˆ†å±•ç¤ºç»„ä»¶å’Œå®¹å™¨ç»„ä»¶ã€‚å›å¤åˆ—è¡¨å¦‚ä½•å±•ç¤ºã€å¦‚ä½•è·å–çš„é€»è¾‘å°±è¢«åˆ†ç¦»åˆ°2ä¸ªç»„ä»¶ä¸­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//å±•ç¤ºç»„ä»¶</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    contruct(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    renderComment(&#123;body,author&#125;) &#123;</div><div class="line">        <span class="keyword">return</span> &lt;li&gt;&#123;body&#125;-&#123;author&#125;&lt;/li&gt;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        renturn &lt;ul&gt;&#123;<span class="keyword">this</span>.state.comments.map(<span class="keyword">this</span>.renderComment)&#125;&lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">/</span><span class="regexp">/å®¹å™¨ç»„ä»¶</span></div><div class="line"><span class="regexp">class CommentListContainer extends React.Component &#123;</span></div><div class="line"><span class="regexp">    contructor() &#123;</span></div><div class="line"><span class="regexp">        super()</span></div><div class="line"><span class="regexp">        this.state = &#123;</span></div><div class="line"><span class="regexp">            comments:[]</span></div><div class="line"><span class="regexp">        &#125;</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">    </span></div><div class="line"><span class="regexp">    componentDidMount() &#123;</span></div><div class="line"><span class="regexp">        $.ajax(&#123;</span></div><div class="line"><span class="regexp">            url:'my-contents.json',</span></div><div class="line"><span class="regexp">            dataType:'json',</span></div><div class="line"><span class="regexp">            sucess:function(comments)&#123;</span></div><div class="line"><span class="regexp">                this.setState(&#123;</span></div><div class="line"><span class="regexp">                    coments:coments</span></div><div class="line"><span class="regexp">                &#125;)</span></div><div class="line"><span class="regexp">            &#125;.bind(this)</span></div><div class="line"><span class="regexp">        &#125;)</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">    </span></div><div class="line"><span class="regexp">    render() &#123;</span></div><div class="line"><span class="regexp">        return &lt;CommentList comtents=&#123;this.state.comments&#125; /</span>&gt;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€ç»„ä»¶-Stateful-amp-Stateless"><a href="#æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€ç»„ä»¶-Stateful-amp-Stateless" class="headerlink" title="æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€ç»„ä»¶ Stateful &amp; Stateless"></a>æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€ç»„ä»¶ Stateful &amp; Stateless</h4><ul>
<li>æœ‰çŠ¶æ€ç»„ä»¶å¯ä»¥è·å–ã€å­˜å‚¨ã€æ”¹å˜å¼•ç”¨æœ¬èº«çš„æ•°æ®ï¼Œä¼´æœ‰stateçš„å˜åŒ–ã€‚</li>
<li>æ— çŠ¶æ€ç»„ä»¶åªæ¥æ”¶æ¥è‡ªå…¶ä»–ç»„ä»¶çš„ä¼ å€¼ï¼Œåªå¯¹this.propsçš„è°ƒç”¨ã€‚</li>
<li>å¹¶ä¸æ˜¯æ‰€æœ‰çš„å±•ç¤ºç»„ä»¶éƒ½æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œæ‰€æœ‰çš„å®¹å™¨ç»„ä»¶éƒ½æ˜¯æœ‰çŠ¶æ€ç»„ä»¶ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="comment">//æœ‰çŠ¶æ€ç»„ä»¶</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StatefullLink</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">        <span class="keyword">this</span>.state = &#123;</div><div class="line">            active:<span class="literal">false</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    handleClick() &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            active: !<span class="keyword">this</span>.state.active</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> &lt;a</div><div class="line">            style=&#123;&#123; color: this.state.active ? 'red' : 'black' &#125;&#125;</div><div class="line">            onClick=&#123;this.handleClick.bind(this)&#125;</div><div class="line">        &gt;</div><div class="line">            Stateful Link</div><div class="line">        &lt;/a&gt;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æ— çŠ¶æ€ç»„ä»¶</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StatelessLink</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    contructor(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    handleClick() &#123;</div><div class="line">        <span class="keyword">this</span>.props.handleClick(<span class="keyword">this</span>.props.router)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">const</span> active = <span class="keyword">this</span>.props.activeRouter === <span class="keyword">this</span>.props.router</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;li&gt;</div><div class="line">                &lt;a</div><div class="line">                    style=&#123;&#123; <span class="attr">color</span> : active ? <span class="string">'red'</span> : <span class="string">'black'</span> &#125;&#125;</div><div class="line">                    onClick=&#123;<span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>)&#125;</div><div class="line">                &gt;</div><div class="line">                    Stateless Link</div><div class="line">                &lt;<span class="regexp">/a&gt;</span></div><div class="line"><span class="regexp">            &lt;/</span>li&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>äº‹å®ä¸Šæˆ‘ä»¬ç¼–å†™çš„ç»„ä»¶å¤§éƒ¨åˆ†éƒ½æ˜¯æ— çŠ¶æ€ç»„ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SimpleButtonES5</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &lt;button&gt;&#123;props.text&#125;&lt;/button&gt;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> SimpleButtonES6 = <span class="function"><span class="params">props</span> =&gt;</span> &lt;button&#123;props.text&#125;&lt;<span class="regexp">/button&gt;</span></div></pre></td></tr></table></figure>
<h4 id="å—æ§ä¸éå—æ§ç»„ä»¶-Controlled-amp-Uncontrolled"><a href="#å—æ§ä¸éå—æ§ç»„ä»¶-Controlled-amp-Uncontrolled" class="headerlink" title="å—æ§ä¸éå—æ§ç»„ä»¶ Controlled &amp; Uncontrolled"></a>å—æ§ä¸éå—æ§ç»„ä»¶ Controlled &amp; Uncontrolled</h4><p>ä¸€èˆ¬æ¶‰åŠåˆ°è¡¨å•å…ƒç´ æ—¶å¯¹ç»„ä»¶ç±»å‹çš„åˆ’åˆ†æ–¹æ³•</p>
<ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹æ‰€æœ‰Reactè¡¨å•å…ƒç´ éƒ½æ˜¯å—æ§ç»„ä»¶ï¼Œæ¯ä¸ªå—æ§ç»„ä»¶éƒ½éœ€è¦å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°</li>
<li>Reacté€šè¿‡ç‰¹æ®Šå±æ€§refæ¥è·å–éå—æ§ç»„ä»¶</li>
</ul>
<p>å—æ§ç»„ä»¶çš„å€¼ä¸€èˆ¬ç”±propsæˆ–è€…staticä¼ å…¥ï¼Œç”¨æˆ·åœ¨å…ƒç´ ä¸Šäº¤äº’æˆ–è€…è¾“å…¥å†…å®¹ä¼šå¼•èµ·staticçš„å˜åŒ–ï¼Œåœ¨staticæ”¹å˜ä¹‹åé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨é¡µé¢ä¸­çœ‹åˆ°å€¼çš„å˜åŒ–ã€‚å‡å¦‚æ²¡æœ‰ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç”¨æˆ·çš„è¾“å…¥æ˜¯ä¸ä¼šæœ‰æ•ˆæœçš„ï¼Œè¿™å°±æ˜¯å—æ§çš„å«ä¹‰æ‰€åœ¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ControlledInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="keyword">this</span>.state = &#123;</div><div class="line">            value:<span class="string">'Please type here...'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    handleChange(event)&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Controlled change:'</span>,event.target.value)</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            value:event.target.value</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;label&gt;</div><div class="line">                Controlled Component:</div><div class="line">                &lt;input type=<span class="string">"text"</span> value=&#123;<span class="keyword">this</span>.state.value&#125; onChange=&#123;(e)=&gt; <span class="keyword">this</span>.handleChange(e)&#125;/&gt;</div><div class="line">            &lt;<span class="regexp">/label&gt;</span></div><div class="line"><span class="regexp">        )</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div></pre></td></tr></table></figure>
<p>éå—æ§ç»„ä»¶ç±»ä¼¼äºä¼ ç»Ÿçš„DOMè¡¨å•æ§ä»¶ï¼Œç”¨æˆ·è¾“å…¥ä¸ä¼šå¼•èµ·staticçš„æ”¹å˜ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šç›´æ¥ä¸ºéå—æ§ç»„ä»¶ä¼ å…¥å€¼ã€‚è·å–éå—æ§ç»„ä»¶çš„å€¼æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„refå±æ€§ï¼Œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UncontrolledInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    handleChange(event)&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Controlled change:'</span>,event.target.value)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;label&gt;</div><div class="line">                Uncontrolled Component:</div><div class="line">                &lt;input type=<span class="string">"text"</span> defaultValue=<span class="string">'Please type here...'</span> ref=&#123;(input)=&gt; <span class="keyword">this</span>.input = input&#125; onChange=&#123;(e)=&gt; <span class="keyword">this</span>.handleChange(e)&#125;/&gt;</div><div class="line">            &lt;<span class="regexp">/label&gt;</span></div><div class="line"><span class="regexp">        )</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div></pre></td></tr></table></figure>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œreactå½“ä¸­æ‰€æœ‰çš„è¡¨å•æ§ä»¶éƒ½éœ€è¦æ˜¯å—æ§ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ªå—æ§ç»„ä»¶ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ã€‚æ¯”å¦‚è¯´æ³¨å†Œï¼Œä½ éœ€è¦å†™å‡ºæ‰€æœ‰å§“åã€ç”µè¯ã€é‚®ç®±çš„é€»è¾‘ã€‚å½“ç„¶ä¹Ÿæœ‰å°æŠ€å·§å¯ä»¥è®©åŒä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°å¼•ç”¨åœ¨å¤šä¸ªè¡¨å•ç»„ä»¶ä¸­ï¼Œä½†ç”Ÿäº§å¼€å‘ä¸­å¹¶æ²¡æœ‰å¤šå¤§çš„æ„ä¹‰ï¼Œå¤šæ˜¯åœ¨é‡æ„çš„æ—¶å€™ä½¿ç”¨ã€‚è¿˜æœ‰ä¸€äº›åˆ«çš„åº“ï¼Œéœ€è¦å’Œè¡¨å•è¿›è¡Œäº¤äº’ï¼Œè¿™æ—¶å€™ä½¿ç”¨éå—æ§ç»„ä»¶å°±ä¼šæ–¹ä¾¿ä¸€äº›ã€‚</p>
<h4 id="ç»„åˆä¸ç»§æ‰¿-Composition-amp-Inheritance"><a href="#ç»„åˆä¸ç»§æ‰¿-Composition-amp-Inheritance" class="headerlink" title="ç»„åˆä¸ç»§æ‰¿ Composition &amp; Inheritance"></a>ç»„åˆä¸ç»§æ‰¿ Composition &amp; Inheritance</h4><ul>
<li>é€šè¿‡ç»„åˆå’Œpropsä¼ å€¼å‡ ä¹å¯ä»¥æ»¡è¶³æ‰€æœ‰çš„åœºæ™¯éœ€æ±‚ï¼ŒåŒæ ·ä¹Ÿæ›´ç¬¦åˆç»„ä»¶åŒ–çš„ç†å¿µï¼Œå°±å¥½åƒç›¸äº’åµŒå¥—çš„DOMå…ƒç´ ä¸€æ ·ã€‚</li>
<li>ç»§æ‰¿çš„å†™æ³•è™½ç„¶ç”Ÿæ•ˆï¼Œä½†æ˜¯ä¸ç¬¦åˆReactçš„ç†å¿µï¼Œåœ¨Reactä¸­ï¼Œpropså¯ä»¥ä¼ å…¥ä»»ä½•ä¸œè¥¿ï¼šå˜é‡ã€å‡½æ•°ã€ç”šè‡³æ˜¯ç»„ä»¶æœ¬èº«ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">InheritedButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    contructor() &#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">        <span class="keyword">this</span>.state = &#123;</div><div class="line">            color: <span class="string">'red'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;button style=&#123;&#123;<span class="attr">backgroundColor</span>: <span class="keyword">this</span>.state.color&#125;&#125; &gt;Inherited Button&lt;<span class="regexp">/button&gt;</span></div><div class="line"><span class="regexp">        )</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">class BlueButton extends InheritedButton &#123;</span></div><div class="line"><span class="regexp">    contructor() &#123;</span></div><div class="line"><span class="regexp">        super()</span></div><div class="line"><span class="regexp">        this.state = &#123;</span></div><div class="line"><span class="regexp">            color:'blue'</span></div><div class="line"><span class="regexp">        &#125;</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">const CompositedButton = props =&gt; &lt;button style=&#123;&#123;backgroundColor:props.color&#125;&#125;Composited Button&lt;/</span>button&gt;</div><div class="line"><span class="keyword">const</span> YellowButton = <span class="function"><span class="params">()</span> =&gt;</span>  &lt;CompositedButton color=<span class="string">"yellow"</span> /&gt;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">    &lt;div&gt;</div><div class="line">        &lt;BlueButton/&gt;</div><div class="line">        &lt;br/&gt;</div><div class="line">        &lt;YellowButton&gt;</div><div class="line">    &lt;<span class="regexp">/div&gt;,</span></div><div class="line"><span class="regexp">    document.getElementById('app')</span></div><div class="line"><span class="regexp">)</span></div></pre></td></tr></table></figure>
<p>å¦‚ä½•æƒ³å®ç°ä¸€äº›éæ´é¢ç±»å‹å‡½æ•°çš„æœç”¨ï¼Œå¯ä»¥å•ç‹¬å†™åœ¨å…¶ä»–çš„æ¨¡å—å½“ä¸­ï¼Œå†å¼•å…¥ç»„ä»¶è¿›è¡Œä½¿ç”¨ã€‚</p>
<h3 id="ç»„ä»¶æ•°æ®"><a href="#ç»„ä»¶æ•°æ®" class="headerlink" title="ç»„ä»¶æ•°æ®"></a>ç»„ä»¶æ•°æ®</h3><p>ä¸‰ç§æ•°æ®åº”ç”¨ç±»å‹</p>
<ul>
<li>Props</li>
<li>State</li>
<li>Context</li>
</ul>
<h4 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h4><p>props å°±æ˜¯å±æ€§prototypeçš„ç¼©å†™ï¼Œåœ¨JSXä¸­propså°±åƒHTMLçš„attributeä¸€æ ·ã€‚åœ¨æ¦‚å¿µä¸Špropså¯¹äºç»„ä»¶ï¼Œå°±ç›¸å½“äºjså½“ä¸­çš„å‚æ•°å¯¹åº”å‡½æ•°ä¸€æ ·ã€‚ç»„ä»¶å‡½æ•°æ¥æ”¶propsä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›è§†å›¾çš„å†…å®¹ã€‚propsæ¯”èµ·åŸç”Ÿçš„htmlå±æ€§å¼ºå¤§è®¸å¤šï¼Œå¯ä»¥ä¼ å…¥å˜é‡ã€å‡½æ•°ã€ç»„ä»¶ â€¦</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Function</span></div><div class="line">Component(props) = View</div><div class="line"></div><div class="line"><span class="comment">//JSX</span></div><div class="line"><span class="keyword">const</span> SimpleButton = <span class="function"><span class="params">props</span> =&gt;</span> &lt;button className=&#123;props.color&#125;&gt;Submit&lt;<span class="regexp">/button&gt;</span></div><div class="line"><span class="regexp">ReactDOM.render(&lt;SimpleButton color="blue"/</span>&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</div><div class="line"></div><div class="line"><span class="comment">//HTML</span></div><div class="line">&lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">"blue"</span>&gt;Submit&lt;<span class="regexp">/button&gt;</span></div></pre></td></tr></table></figure>
<p>Propsçš„å€¼è‡ªä¸Šå‘ä¸‹ä¼ é€’ï¼Œä»çˆ¶ç»„ä»¶ä¼ å…¥åˆ°å­ç»„ä»¶å½“ä¸­ï¼Œå¹¶ä¸”propsæ˜¯è‡ªè¯»çš„ï¼Œä¸èƒ½åœ¨ç»„ä»¶ä¸­ä¿®æ”¹propsçš„å†…å®¹ã€‚ å°±æ˜¯è¯´ç»„ä»¶åªèƒ½é€šè¿‡ä¼ å…¥çš„propså€¼æ¸²æŸ“ç•Œé¢ï¼Œå†…éƒ¨ä¸èƒ½å¯¹propså€¼è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Children = <span class="function"><span class="params">props</span> =&gt;</span> &lt;p&gt;&#123;props.name&#125;&lt;<span class="regexp">/p&gt;</span></div><div class="line"><span class="regexp">const Father = &lt;Children name="Bob"/</span>&gt;</div></pre></td></tr></table></figure>
<p>Propsæœ‰ç±»å‹æ£€æŸ¥å’Œé»˜è®¤å€¼</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> Title = <span class="function"><span class="params">props</span> =&gt;</span> &lt;h1&gt;&#123;props.title&#125;&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">Title.defaultProps = &#123;</span></div><div class="line"><span class="regexp">    title: 'Hello world!'</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">Title.propTypes = &#123;</span></div><div class="line"><span class="regexp">    title: PropTypes.string.isRequired</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">ReactDOM.render(&lt;Title/</span>&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</div></pre></td></tr></table></figure>
<h4 id="State"><a href="#State" class="headerlink" title="State"></a>State</h4><p>stateç¿»è¯‘è¿‡æ¥å¯ä»¥ä¸ºçŠ¶æ€ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æœ‰è‡ªèº«çš„çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥åŒ…å«æ•´ä¸ªreactåº”ç”¨çš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼šé€šè¿‡APIä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œç„¶åæ¸²æŸ“åˆ°é¡µé¢ï¼Œå°±æ˜¯æˆ‘ä»¬ç”¨åˆ°stateçš„æ—¶å€™ã€‚</p>
<ul>
<li>åˆå§‹åŒ–</li>
<li>setStateæ–¹æ³•</li>
<li>å‘ä¸‹ä¼ é€’æ•°æ®</li>
<li>State management çŠ¶æ€ç®¡ç†</li>
<li>æœåŠ¡å™¨æ•°æ®äº¤äº’</li>
<li>ç”¨æˆ·è¾“å…¥äº¤äº’</li>
<li>å¤šä¸ªç»„ä»¶å…±ç”¨çš„Stateå­˜æ”¾åœ¨å…¶å…¬æœ‰çš„çˆ¶ç»„ä»¶é‡Œ</li>
</ul>
<p>ç®€å•çš„è®¡æ•°å™¨ä¾‹å­ ï¼Œé€šè¿‡classç±»å®šä¹‰ç»„ä»¶æ¥å£°æ˜ä¸€ä¸ªæœ‰çŠ¶æ€ç»„ä»¶ï¼Œç„¶ååœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–çŠ¶æ€çš„stateå¹¶ä¸ºå®ƒèµ‹é»˜è®¤å€¼ã€‚ä¹‹åå°±èƒ½é€šè¿‡this.stateæ¥è®¿é—®å®ƒï¼Œæˆ‘ä»¬åœ¨æ·»åŠ ä¸€ä¸ªè´Ÿè´£å¤„ç†stateå˜åŒ–çš„å‡½æ•°addOneï¼Œé€šè¿‡setStateçš„æ–¹æ³•æ¥æ”¹å˜stateå€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Conter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">        <span class="keyword">this</span>.state = &#123;</div><div class="line">            counter:<span class="number">0</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    addOne() &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            counter:<span class="keyword">this</span>.state.counter +<span class="number">1</span></div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span>(</div><div class="line">            &lt;div&gt;</div><div class="line">                &lt;p&gt;&#123;<span class="keyword">this</span>.state.counter&#125;&lt;<span class="regexp">/p&gt;</span></div><div class="line"><span class="regexp">                &lt;button onClick=&#123;()=&gt;this.addOne()&#125;&gt;Increment&lt;/</span>button&gt;</div><div class="line">            &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">        )</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">ReactDOM.render(&lt;Counter /</span>&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</div></pre></td></tr></table></figure>
<p>å¤æ‚ç‚¹çš„ç‚¹èµä¾‹å­ ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> Title = <span class="function"><span class="params">props</span> =&gt;</span> &lt;h1&gt;&#123;props.title&#125;&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">const UserInfo = props =&gt; &lt;p&gt;&#123;props.firstName + ' ' + props.lastName&#125;&lt;/</span>p&gt;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LikeButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    handleClick() &#123;</div><div class="line">        <span class="keyword">this</span>.props.handleClick()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> &lt;button onClick&#123;()=&gt;this.handleClick()&#125;&gt;&#123;this.props.mark&#125;&lt;/button&gt;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props)&#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">        <span class="keyword">this</span>.state = &#123;</div><div class="line">            mark:<span class="string">'â˜†'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    handleButtonClick()&#123;</div><div class="line">        <span class="keyword">const</span> mark = (<span class="keyword">this</span>.state.mark === <span class="string">'â˜†'</span>) ? <span class="string">'â˜…'</span> : <span class="string">'â˜†'</span>;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            mark:mark</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div&gt;</div><div class="line">                &lt;Title title=<span class="string">"Hello , jikexueyuan"</span>/&gt;</div><div class="line">                &lt;UserInfo firseName=<span class="string">"Jax"</span> lastName=<span class="string">"Chu"</span> /&gt;</div><div class="line">                &lt;LikeButton mark=&#123;<span class="keyword">this</span>.state.mark&#125; handleClick&#123;()=&gt;<span class="keyword">this</span>.handleButtonClick()&#125;</div><div class="line">            &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">        )</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">const Root = props =&gt; &lt;div className="container"&gt;&#123;props.children&#125;&lt;/</span>div&gt;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">    &lt;Root&gt;</div><div class="line">        &lt;App/&gt;</div><div class="line">    &lt;<span class="regexp">/Root&gt;</span></div><div class="line"><span class="regexp">    ,document.getElementById('app'))</span></div></pre></td></tr></table></figure>
<p>å‡å¦‚Stateåˆ†æ•£åˆ°åº”ç”¨çš„å„ä¸ªéƒ¨åˆ†ï¼Œæœ‰çš„å¤æ‚åç«¯æ•°æ®çš„äº¤äº’ï¼Œæœ‰çš„å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œæœ‰çš„è´Ÿè´£é¡µé¢å˜åŒ–çš„é€»è¾‘ï¼ŒåæœŸç»´æŠ¤æ˜¯ç›¸å½“å›°éš¾çš„ã€‚å› æ­¤åœ¨å¼€å‘Reactåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬åº”å°½é‡æŠŠStateç»Ÿä¸€ç®¡ç†ï¼Œé€šè¿‡propsæŠŠstateçš„æ•°æ®ä¼ é€’åˆ°ç»„ä»¶å½“ä¸­ã€‚è´§å¸æ±‡ç‡è½¬æ¢å™¨ </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CurrencyConvertor</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Componnet</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>()&#123;</div><div class="line">        <span class="keyword">super</span>()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">        money : <span class="number">100</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    handleInputChange(event) &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            money:event.target.value</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div&gt;</div><div class="line">                &lt;h2&gt;è´§å¸å…‘æ¢&lt;<span class="regexp">/h2&gt;</span></div><div class="line"><span class="regexp">                &lt;YuanInput money=&#123;this.state.money&#125; handleChange=&#123;(e)=&gt; this.handleInputChange(e)&#125; /</span>&gt;</div><div class="line">                &lt;MoneyCovertor type=<span class="string">'ç¾å…ƒ'</span> unit=<span class="string">'dollar'</span> money=&#123;<span class="keyword">this</span>.state.money&#125; rate=&#123;<span class="number">0.1453</span>&#125; /&gt;</div><div class="line">                &lt;MoneyCovertor type=<span class="string">'æ—¥å…ƒ'</span> unit=<span class="string">'yen'</span> money=&#123;<span class="keyword">this</span>.state.money&#125; rate=&#123;<span class="number">16.1814</span>&#125; /&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">YuanInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props)&#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    handleChange(event)&#123;</div><div class="line">        <span class="keyword">this</span>.props.handleChange(event)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;p&gt;</div><div class="line">                &lt;lable&gt;</div><div class="line">                äººæ°‘å¸</div><div class="line">                &lt;input name=<span class="string">'yuan'</span> onChange=&#123;(e)=&gt;<span class="keyword">this</span>.handleChange(e)&#125; value=&#123;<span class="keyword">this</span>.props.money&#125;</div><div class="line">                &lt;<span class="regexp">/lable&gt;</span></div><div class="line"><span class="regexp">            &lt;/</span>p&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MoneyCovertor</span> </span>= props =&gt; (</div><div class="line">    &lt;p&gt;</div><div class="line">        &lt;lable&gt;</div><div class="line">            &#123;props.type&#125;</div><div class="line">            &lt;input name=&#123;props.unit&#125; value=&#123;(props.money * props.rate).toFixed(<span class="number">2</span>)&#125; disabled /&gt;</div><div class="line">        &lt;<span class="regexp">/lable&gt;</span></div><div class="line"><span class="regexp">    &lt;/</span>p&gt;</div><div class="line">)</div><div class="line"></div><div class="line">ReactDOM.render(&lt;CurrencyConvertor /&gt; ,document.getElementById('app'))</div></pre></td></tr></table></figure>
<h4 id="context"><a href="#context" class="headerlink" title="context"></a>context</h4><p>é›†ä¸­ç®¡ç†stateä¼šå¼•å‘å¦ä¸€ä¸ªé—®é¢˜ï¼Œstateçš„æ•°æ®éƒ½æ˜¯è‡ªä¸Šè€Œä¸‹ä¼ é€’çš„ï¼Œå‡å¦‚æˆ‘ä»¬åœ¨æœ€å¤–ä¸€å±‚è¿›è¡Œç»„ä»¶ç®¡ç†ï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨çš„å­ç»„ä»¶ç¡®åœ¨Nå±‚ä¹‹ä¸‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨æ¯ä¸€å±‚çš„ç»„ä»¶éƒ½ä¼ é€’propsä¸‹å»ã€‚æ‰€ä»¥Reactæä¾› Context å¸¦æœ‰å®éªŒæ€§è´¨ï¼Œç”¨äºè·¨å±‚çº§ä¼ é€’æ•°æ®ã€‚å¿…é¡»è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> UserInfo = <span class="function">(<span class="params">props,content</span>) =&gt;</span> (</div><div class="line">    &lt;div className=<span class="string">"UserInfo-name"</span>&gt;&#123;context.lastName +<span class="string">','</span>+ props.firstName&#125;&lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">)</span></div><div class="line"><span class="regexp">UserInfo.contextTypes = &#123;</span></div><div class="line"><span class="regexp">    lastName:PropTypes.string</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">const Column = props =&gt; &lt;div className='column'&gt;&lt;UserInfo firseName=&#123;props.firstName&#125; /</span>&gt;&lt;div&gt;</div><div class="line">const Row    = props =&gt; &lt;div className='row'&gt;&lt;Columen firseName=&#123;props.firstName&#125; /&gt;&lt;/div&gt;</div><div class="line">const Container = props =&gt; &lt;div className='container'&gt;&lt;Row firstName=&#123;props.firstName&#125; /&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">calss App extends React.component &#123;</div><div class="line">    constructor() &#123;</div><div class="line">        super()</div><div class="line">        this.state = &#123;</div><div class="line">            fisetName: 'Chu',</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    getChildContent() &#123;</div><div class="line">        return &#123;</div><div class="line">            lastName: 'Jax'</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        return (</div><div class="line">            &lt;div className="app"&gt;</div><div class="line">                &lt;Container first=&#123;this.state.firstName&#125; /&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">App.childContextTypes = &#123;</div><div class="line">    lastName: PropTypes.string</div><div class="line">&#125;</div><div class="line"></div><div class="line">ReactDOM.render(&lt;App/&gt;,document.getElementById('root'))</div></pre></td></tr></table></figure>
<h3 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="React-æ˜¯å¦‚ä½•æ¸²æŸ“ç»„ä»¶çš„ï¼Ÿ"><a href="#React-æ˜¯å¦‚ä½•æ¸²æŸ“ç»„ä»¶çš„ï¼Ÿ" class="headerlink" title="React æ˜¯å¦‚ä½•æ¸²æŸ“ç»„ä»¶çš„ï¼Ÿ"></a>React æ˜¯å¦‚ä½•æ¸²æŸ“ç»„ä»¶çš„ï¼Ÿ</h4><p>ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬éƒ½ä¼šå…ˆå®šä¹‰ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨é¡µé¢å½“ä¸­çœ‹åˆ°è¿™ä¸ªç»„ä»¶æ¸²æŸ“çš„ç»“æœçš„è¯ï¼Œéœ€è¦ç”¨JSXçš„å½¢å¼æŠŠç»„ä»¶ä¼ å…¥åˆ°ReactDOM.renderæ–¹æ³•ä¸­ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚JSXé€šè¿‡Reactè½¬åŒ–å…¶å®æ˜¯ä¸€ä¸ªreact.createElementçš„æ–¹æ³•ã€‚renderæ–¹æ³•è·å–åˆ°reactå…ƒç´ ä¸­ä¼šå°†å®ƒå®ä¾‹åŒ–ï¼Œæ›´å…·Reactå®ä¾‹çš„å…ƒç´ åˆ›å»ºå‡ºçœŸå®DOMã€‚å†æ›´å…·ç¬¬äºŒä¸ªå‚æ•°çš„æŒ‡å‘ï¼Œè®²åˆ›å»ºå¥½çš„å…ƒç´ æ’å…¥åˆ°ç›®æ ‡DOMå®¹å™¨å½“ä¸­ã€‚</p>
<p>å†æ–°ç‰ˆæœ¬çš„Reactå½“ä¸­ï¼ŒReactçš„åº•å±‚è¢«é‡å†™ï¼Œæ¢ä¸Šæ–°çš„å¼•æ“ï¼ŒReact Fiberã€‚å®ƒå°†Reactæ›´æ–°åº”ç”¨ç•Œé¢åˆ†æˆäº†2ä¸ªä¸»è¦çš„éƒ¨åˆ†ï¼Œè°ƒåº¦è¿‡ç¨‹ä¸æ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<p>åœ¨è°ƒåº¦è¿‡ç¨‹ä¸­ï¼Œæœ‰å››ä¸ªç”Ÿå‘½å‘¨æœŸä¼šè¢«è§¦å‘ï¼š</p>
<ul>
<li>componentWillMount</li>
<li>conponentWillReceiveProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
</ul>
<p>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸä¼šè¢«è§¦å‘ï¼š</p>
<ul>
<li>componentDidMount</li>
<li>componentDidUpdate</li>
<li>componentWillUnmount</li>
</ul>
<p>Reactä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶è‡ªå·±çš„å¼•ç”¨æä¾›äº†è®¸å¤šé¢„çŸ¥çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå°±æƒ³ä»¥ä¸Šçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œä¼šåœ¨ç»„ä»¶æŒ‚è½½æµç¨‹ã€æ›´æ–°æµç¨‹ã€å¸è½½æµç¨‹ä¸­è§¦å‘ã€‚Reactåˆæ¬¡æ¸²æŸ“æ—¶ï¼Œå±äºæŒ‚è½½æµç¨‹ï¼Œåç»­æ›´æ–°æ—¶çš„éƒ½æ˜¯æ›´æ–°æµç¨‹ï¼Œæœ€åæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ReactDOM.unmountComponentAtNodeå°†ç»„ä»¶å¸è½½ï¼Œå…¶ä¸­è¿›è¡Œçš„å°±æ˜¯å¸è½½æµç¨‹ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ ã€‚è¿™é‡Œæˆ‘ä»¬å®šä¹‰2ä¸ªç»„ä»¶ï¼Œçˆ¶ç»„ä»¶ä¼šä¼ é€’stateåˆ°å­ç»„ä»¶å½“ä¸­ï¼Œé¡ºä¾¿stateçš„å˜åŒ–å’Œpropsçš„ä¼ é€’æµç¨‹æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»è¿™ä¸ª ä¸­çœ‹åˆ°ã€‚å­ç»„ä»¶æ¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œéƒ½åœ¨æ§åˆ¶å°è¾“å‡ºç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"render"</span>&gt;</span>æ¸²æŸ“<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Number</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%cconstructor'</span> + <span class="string">'%c å­ç»„ä»¶å·²æ„é€ '</span>, <span class="string">'font-weight:bold'</span>, <span class="string">'color: blue'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentWillMount() &#123;</div><div class="line">    <span class="built_in">console</span>.group(<span class="string">"%c React æŒ‚è½½"</span>, <span class="string">'color: #00d8ff'</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%ccomponentWillMount'</span> + <span class="string">'%c ç»„ä»¶å³å°†æŒ‚è½½'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">''</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentDidMount() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%ccomponentDidMount'</span> + <span class="string">'%c ç»„ä»¶å·²æŒ‚è½½'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">''</span>)</div><div class="line">    <span class="built_in">console</span>.groupEnd();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'\n'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentWillReceiveProps(newProps) &#123;</div><div class="line">    <span class="built_in">console</span>.group(<span class="string">"%c React æ›´æ–°"</span>, <span class="string">'color: green'</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%ccomponentWillReceiveProps'</span> + <span class="string">'%c ç»„ä»¶å³å°†æ¥æ”¶props'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">''</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'newProps'</span>, newProps.counter)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'this.props'</span>, <span class="keyword">this</span>.props.counter)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  shouldComponentUpdate(newProps, newState) &#123;</div><div class="line">    <span class="keyword">const</span> result = <span class="literal">true</span></div><div class="line">    <span class="built_in">console</span>.info(<span class="string">'%cshouldComponentUpdate'</span> + <span class="string">'%c è¿”å›åˆ¤æ–­æ˜¯å¦è¦æ›´æ–°ç»„ä»¶'</span> + <span class="string">`%c <span class="subst">$&#123;result&#125;</span>`</span>, <span class="string">'font-weight:bold'</span>, <span class="string">'color: #ff3c41'</span>, <span class="string">'font-weight:bold;color: #236fd4'</span>)</div><div class="line">    <span class="keyword">if</span> (!result) <span class="built_in">console</span>.groupEnd()</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentWillUpdate(nextProps, nextState) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%ccomponentWillUpdate'</span> + <span class="string">'%c ç»„ä»¶å³å°†æ›´æ–°'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">''</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'nextProps'</span>, nextProps.counter)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'this.props'</span>, <span class="keyword">this</span>.props.counter)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentDidUpdate(prevProps, prevState) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%ccomponentDidUpdate'</span> + <span class="string">'%c ç»„ä»¶å·²æ›´æ–°'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">''</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'prevProps'</span>, prevProps.counter)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'this.props'</span>, <span class="keyword">this</span>.props.counter)</div><div class="line">    <span class="built_in">console</span>.groupEnd();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'\n'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentWillUnmount() &#123;</div><div class="line">    <span class="built_in">console</span>.group(<span class="string">"%c React å¸è½½"</span>, <span class="string">'color: brown'</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%ccomponentWillUnmount'</span> + <span class="string">'%c ç»„ä»¶å³å°†å¸è½½'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">'color: gray'</span>)</div><div class="line">    <span class="built_in">console</span>.groupEnd();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'\n'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%crender'</span> + <span class="string">'%c ç»„ä»¶æ¸²æŸ“ä¸­...'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">''</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'this.props'</span>, <span class="keyword">this</span>.props.counter)</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123; this.props.counter &#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%cconstructor'</span> + <span class="string">'%c çˆ¶ç»„ä»¶å·²æ„é€ '</span>, <span class="string">'font-weight:bold'</span>, <span class="string">'color: #ae63e4'</span>)</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentWillMount() &#123;</div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">      counter: <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'this.state'</span>, <span class="keyword">this</span>.state.counter)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  shouldComponentUpdate(newProps, newState) &#123;</div><div class="line">    <span class="keyword">const</span> result = <span class="literal">true</span></div><div class="line">    <span class="built_in">console</span>.info(<span class="string">'%cshouldComponentUpdate'</span> + <span class="string">'%c è¿”å›åˆ¤æ–­æ˜¯å¦è¦æ›´æ–°çˆ¶ç»„ä»¶'</span> + <span class="string">`%c <span class="subst">$&#123;result&#125;</span>`</span>, <span class="string">'font-weight:bold'</span>, <span class="string">'color: #ff3c41'</span>, <span class="string">'font-weight:bold;color: #236fd4'</span>)</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  addOne() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%caddOne()'</span> + <span class="string">'%c äº‹ä»¶å¤„ç†å‡½æ•°è§¦å‘'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">''</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'prevState'</span>, <span class="keyword">this</span>.state.counter)</div><div class="line">    <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</div><div class="line">      counter: prevState.counter + <span class="number">1</span></div><div class="line">    &#125;))</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  unMount() &#123;</div><div class="line">    ReactDOM.unmountComponentAtNode(<span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  update() &#123;</div><div class="line">    <span class="keyword">this</span>.forceUpdate()</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'%crender'</span> + <span class="string">'%c çˆ¶ç»„ä»¶æ¸²æŸ“ä¸­...'</span>, <span class="string">'font-weight:bold'</span>, <span class="string">''</span>)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'nextState'</span>, <span class="keyword">this</span>.state.counter)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'\n'</span>)</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;<span class="built_in">Number</span> counter=&#123;<span class="keyword">this</span>.state.counter&#125; /&gt;</div><div class="line">        &lt;button</div><div class="line">          onClick=&#123;() =&gt; <span class="keyword">this</span>.addOne()&#125;&gt;</div><div class="line">          å¢åŠ </div><div class="line">        &lt;<span class="regexp">/button&gt;</span></div><div class="line"><span class="regexp">        &lt;button</span></div><div class="line"><span class="regexp">          onClick=&#123;() =&gt; this.update()&#125;&gt;</span></div><div class="line"><span class="regexp">          å¼ºåˆ¶æ›´æ–°</span></div><div class="line"><span class="regexp">        &lt;/</span>button&gt;</div><div class="line">        &lt;button</div><div class="line">          onClick=&#123;() =&gt; <span class="keyword">this</span>.unMount()&#125;&gt;</div><div class="line">          å¸è½½</div><div class="line">        &lt;<span class="regexp">/button&gt;</span></div><div class="line"><span class="regexp">      &lt;/</span>div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> render = <span class="function"><span class="params">()</span> =&gt;</span> ReactDOM.render(</div><div class="line">  &lt;Counter /&gt;,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</div><div class="line">)</div><div class="line"><span class="comment">//render()</span></div><div class="line"></div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'render'</span>).addEventListener(<span class="string">'click'</span>, render)</div></pre></td></tr></table></figure>
<p>é¦–å…ˆæ˜¯ç»„ä»¶åˆæ¬¡æ¸²æŸ“çš„æŒ‚è½½æµç¨‹ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæŒ‰é’®ï¼Œç»‘å®šä¸€ä¸ªæ¸²æŸ“å‡½æ•°æ¥ä¸»åŠ¨è§¦å‘ç»„ä»¶çš„æ¸²æŸ“ã€‚åˆæ¬¡æŒ‚è½½ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬æ„å»ºçš„ç»„ä»¶ç±»ä¼šè¢«æŒ‚è½½å£°æ˜ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰ä¼šè§¦å‘<code>componentWillMount</code>ï¼Œåœ¨æ¸²æŸ“ä¹‹åä¼šè§¦å‘<code>componentDidMount</code>è¿™2ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p>
<p><code>componentWillMount</code>ä¼šåœ¨æ¸²æŸ“ä¹‹å‰è¢«è§¦å‘ï¼Œå¹¶ä¸”åªä¼šè¢«ç»„ä»¶è¢«æ¸²æŸ“ä¹‹å‰è§¦å‘ä¸€æ¬¡ã€‚å¦‚æœä½¿ç”¨ES6çš„classå£°æ˜ç»„ä»¶çš„è¯ï¼Œæ—¶æœºå’Œä½œç”¨å‡ ä¹å’Œ<code>constructor</code>ç›¸åŒã€‚åœ¨<code>componentWillMount</code>å¯¹stateçš„å®šä¹‰æˆ–è€…æ”¹å˜ï¼Œæ˜¯ä¸ä¼šè§¦å‘æ–°çš„æ¸²æŸ“çš„ã€‚</p>
<p><code>componentDidMount</code>ä¼šåœ¨æ¸²æŸ“å®Œæˆä¹‹åè¢«è§¦å‘ï¼ŒåŒæ ·è‡ªä¼šè§¦å‘ä¸€æ¬¡ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå·²ç»å¯ä»¥è®¿é—®åˆ°æ¸²æŸ“åˆ°é¡µé¢çš„DOMå…ƒç´ äº†ï¼Œæ‰€ä»¥å®˜æ–¹æ¨èåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥è¿›è¡Œä¸€äº›ç±»ä¼¼äºAJAXè¯·æ±‚çš„æ“ä½œï¼Œæ˜¯æˆ‘ä»¬æœ€ç»å¸¸ä½¿ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p>
<p>çˆ¶ç»„ä»¶ä¼šå‘å­ç»„ä»¶æ›´æ–°propsçš„æ•°å€¼ï¼Œè¿™æ—¶å€™ä¼šè§¦å‘<code>componentWillReceiveProps</code>ã€‚ç»„ä»¶åœ¨è¿è¡Œè¿™ä¸€æµç¨‹ï¼Œpropsè¿˜æ²¡æœ‰è¢«æ”¹å˜ã€‚ç„¶åå°±ä¼šå°±ä¼šè§¦å‘<code>shouldComponentUpdate</code>ï¼Œé»˜è®¤è¿”å›trueï¼Œå¦‚æœè¿”å›falseçš„è¯ï¼Œæ›´æ–°æµç¨‹ä¼šè¢«è·³è¿‡ï¼Œæ¸²æŸ“ä¹Ÿä¸ä¼šç»§ç»­è¢«è§¦å‘ã€‚å‡å¦‚è¦æå‡åº”ç”¨çš„æ€§èƒ½ï¼Œå¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿›è¡Œè‡ªå®šä¹‰çš„åˆ¤æ–­æ¥è·³è¿‡ä¸éœ€è¦è¢«æ›´æ–°çš„ç»„ä»¶ã€‚ç»„ä»¶åœ¨åˆæ¬¡æ¸²æŸ“æ—¶ï¼Œå’ŒforceUpdateæ—¶ï¼Œæ˜¯ä¸ä¼šè§¦å‘è¿™ä¸ªå‡½æ•°çš„ã€‚</p>
<p><code>componentWillUpdate</code>å’Œ<code>componentDidUpdate</code>ä¼šåœ¨æ›´æ–°æ¸²æŸ“çš„å‰åè§¦å‘ã€‚åœ¨<code>componentWillUpdate</code>é‡Œæ— æ³•è°ƒç”¨this.setStateï¼Œå¯ä»¥ç†è§£ä¸ºæ›´æ–°æµç¨‹åˆ°è¿™ä¸€æ­¥æƒ³è¦æ›´æ”¹stateå·²ç»æ™šäº†ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥åœ¨<code>componentWillReceiveProps</code>ä¸­æ›´æ–°stateï¼ŒReactä¼šæŠŠæ”¹å˜åˆå¹¶åˆ°åŒä¸€ä¸ªæ›´æ–°æµç¨‹é‡Œé¢æ‰§è¡Œã€‚è€Œ<code>componentDidUpdate</code>æ˜¯å¦ä¸€ä¸ªé€‚åˆæˆ‘ä»¬å‘èµ·AJAXè¯·æ±‚çš„åœ°æ–¹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è¿˜å¯ä»¥æ¯”è¾ƒå‰åçš„propså˜åŒ–ï¼Œå†å†³å®šæ˜¯å¦å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚æ¯”è¾ƒå®ç”¨çš„åœºæ™¯å°±æ˜¯ä¿å­˜ç”¨æˆ·çš„è¾“å…¥åˆ°æœåŠ¡å™¨ï¼Œç”¨æˆ·å¯èƒ½ä¼šæ¥æ¥å›å›ä¿®æ”¹å†…å®¹ï¼Œå¦‚æœæˆ‘ä»¬åˆ¤æ–­ä¿®æ”¹å‰åæ•°æ®æœ€ç»ˆæ²¡æœ‰è¢«æ”¹å˜ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦å‘èµ·ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚äº†ã€‚</p>
<p>é€šè¿‡<code>ReactDOM.unmountComponentAtNode</code>æ¥å¸è½½å·²ç»æŒ‚è½½äº†çš„Reactç»„ä»¶ã€‚åœ¨å¸è½½æµç¨‹çš„<code>componentWillUnmount</code>æ˜¯æˆ‘ä»¬è§£ç»‘äº‹ä»¶æœ€åˆé€‚çš„ä½ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; constructor çˆ¶ç»„ä»¶ä»¥åŠæ„é€ </div><div class="line">&gt;&gt; this.state 0</div><div class="line">&gt;&gt; render çˆ¶ç»„ä»¶æ¸²æŸ“ä¸­...</div><div class="line">&gt;&gt; nextState 0</div><div class="line"></div><div class="line">&gt;&gt;å­ç»„ä»¶å·²æ„é€ </div><div class="line">&gt;&gt;componentWillMount ç»„ä»¶å³å°†æŒ‚è½½</div><div class="line">&gt;&gt;render ç»„ä»¶æ¸²æŸ“ä¸­</div><div class="line">&gt;&gt;this.props 0</div><div class="line">&gt;&gt;componentDidMount ç»„ä»¶å·²æŒ‚è½½ </div><div class="line"></div><div class="line">&gt;&gt;addOne() äº‹ä»¶å¤„ç†å‡½æ•°è§¦å‘</div><div class="line">&gt;&gt;prevState 0</div><div class="line">&gt;&gt;shouldComponentUpdate è¿”å›åˆ¤æ–­æ˜¯å¦è¦æ›´æ–°çˆ¶ç»„ä»¶ <span class="literal">true</span></div><div class="line">&gt;&gt;render çˆ¶ç»„ä»¶æ¸²æŸ“ä¸­...</div><div class="line">&gt;&gt;nextState 1</div><div class="line"></div><div class="line">&gt;&gt;componentWillReceiveProps ç»„ä»¶å³å°†æ¥å—Props</div><div class="line">&gt;&gt;nextProps 1</div><div class="line">&gt;&gt;this.props 0</div><div class="line">&gt;&gt;shouldComponentUpdate è¿”å›åˆ¤æ–­æ˜¯å¦è¦æ›´æ–°ç»„ä»¶ <span class="literal">true</span></div><div class="line">&gt;&gt;&gt;&gt;componentWillUpdate ç»„ä»¶å³å°†æ›´æ–°</div><div class="line">&gt;&gt;nextProps 1</div><div class="line">&gt;&gt;this.props 0</div><div class="line">&gt;&gt;render ç»„ä»¶æ¸²æŸ“ä¸­</div><div class="line">&gt;&gt;this.props 1</div><div class="line">&gt;&gt;componentDidUpdate ç»„ä»¶å·²æ›´æ–°</div><div class="line">&gt;&gt;preProps 0</div><div class="line">&gt;&gt;this.props 1</div><div class="line"></div><div class="line">&gt;&gt; componentWillUnmount ç»„ä»¶å³å°†å¸è½½</div></pre></td></tr></table></figure>
<p><a href="https://codepen.io/discountry/pen/wJNpop" target="_blank" rel="external">Reactå¼‚æ­¥è·å–æ–‡ç« å° </a></p>
<p>é€šè¿‡constçš„å…³é”®å­—å£°æ˜ï¼Œä½¿ç”¨arrowFunction å®šä¹‰ä¸€ä¸ªç®€å•çš„ RedditList å±•ç¤ºç»„ä»¶ã€‚ä¸€èˆ¬ç»„ä»¶åŒ…å«å¤šå±‚åµŒå¥—çš„JSXçš„æ—¶å€™ï¼Œéƒ½ä¼šåŠ ä¸Šä¸€ä¸ªå°æ‹¬å·ï¼Œå› ä¸ºæµè§ˆå™¨åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¹æ¢è¡Œçš„ä»£ç åŠ ä¸Šåˆ†å·ã€‚ JSXå½“ä¸­æ—¶å¯ä»¥ä½¿ç”¨jsè¡¨è¾¾å¼çš„ï¼Œä¸€èˆ¬åœ¨æ¸²æŸ“åˆ—è¡¨ä¸­éƒ½ä¼šæ‹¿åˆ°ä¸€ä¸ªæ•°ç»„æ•°æ®ï¼Œé€šè¿‡mapçš„æ–¹æ³•æ¸²æŸ“å‡ºåˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹ã€‚JSXåœ¨æ¸²æŸ“åˆ—è¡¨é¡¹çš„æ—¶å€™ï¼Œæ¯ä¸€é¡¹éƒ½å¿…é¡»å¸¦æœ‰keyå±æ€§ï¼Œä½œä¸ºè¯†åˆ«åˆ—è¡¨ä¸­æŸä¸€é¡¹çš„æ ‡è¯†ï¼ŒReactåœ¨æ¸²æŸ“åˆ—è¡¨çš„æ—¶å€™ä¼šé€šè¿‡keyæ¥åˆ¤æ–­æ¯ä¸€ä¸ªçš„å†…å®¹ã€‚</p>
<p>ä½¿ç”¨ç±»å®šä¹‰çš„æ–¹æ³•æ¥å®šä¹‰ä¸€ä¸ª RedditFetch å®¹å™¨ç»„ä»¶ã€‚é¦–å…ˆæŠŠpostsåˆå§‹åŒ–ä¸ºæ•°ç»„ï¼Œå®šä¹‰ä¸€ä¸ªä»æœåŠ¡å™¨è·å–æ•°æ®çš„æ–¹æ³•fetchFromApiï¼Œåœ¨è¯·æ±‚æˆåŠŸä¹‹åé‡æ–°è®¾ç½®stateï¼Œè·å–åˆ°å¸–å­çš„æ•°æ®ã€‚åœ¨componentDidMountä¸­è°ƒå–fetchFromApiï¼Œåœ¨componentWillUnmountä¸­è§£é™¤å‘æœåŠ¡å™¨å‘èµ·çš„è¯·æ±‚ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> RedditList = <span class="function"><span class="params">props</span> =&gt;</span> (</div><div class="line">    &lt;div&gt;</div><div class="line">        &lt;h1&gt;&#123;<span class="string">`/r/<span class="subst">$&#123;props.subreddit&#125;</span>`</span>&#125;&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">        &lt;ul&gt;</span></div><div class="line"><span class="regexp">            &#123;props.posts.map(post =&gt;</span></div><div class="line"><span class="regexp">                &lt;li key=&#123;post.id&#125;&gt;</span></div><div class="line"><span class="regexp">                    &lt;a href=&#123;post.url&#125;&gt;&#123;post.title&#125;&lt;/</span>a&gt;  </div><div class="line">                &lt;<span class="regexp">/li&gt;</span></div><div class="line"><span class="regexp">            )&#125;</span></div><div class="line"><span class="regexp">        &lt;/u</span>l&gt;</div><div class="line">    &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">)</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">class RedditFetch extends React.Component &#123;</span></div><div class="line"><span class="regexp">    constructor(props) &#123;</span></div><div class="line"><span class="regexp">        super(props)</span></div><div class="line"><span class="regexp">            this.state = &#123;</span></div><div class="line"><span class="regexp">                posts: []</span></div><div class="line"><span class="regexp">        &#125;</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">  </span></div><div class="line"><span class="regexp">    fetchFromApi() &#123;</span></div><div class="line"><span class="regexp">        this.serverRequest = axios.get(`https:/</span><span class="regexp">/www.reddit.com/</span>r/$&#123;<span class="keyword">this</span>.props.subreddit&#125;.json<span class="string">`)</span></div><div class="line"><span class="string">            .then(res =&gt; &#123;</span></div><div class="line"><span class="string">                const posts = res.data.data.children.map(obj =&gt; obj.data)</span></div><div class="line"><span class="string">                this.setState(&#123;</span></div><div class="line"><span class="string">                    posts</span></div><div class="line"><span class="string">            &#125;)</span></div><div class="line"><span class="string">        &#125;)</span></div><div class="line"><span class="string">    &#125;</span></div><div class="line"><span class="string">  </span></div><div class="line"><span class="string">    componentDidMount() &#123;</span></div><div class="line"><span class="string">        this.fetchFromApi()</span></div><div class="line"><span class="string">    &#125;</span></div><div class="line"><span class="string">  </span></div><div class="line"><span class="string">    componentWillUnmount() &#123;</span></div><div class="line"><span class="string">        this.serverRequest.abort()</span></div><div class="line"><span class="string">    &#125;</span></div><div class="line"><span class="string">  </span></div><div class="line"><span class="string">    render() &#123;</span></div><div class="line"><span class="string">        return &lt;RedditList subreddit=&#123;this.props.subreddit&#125; posts=&#123;this.state.posts&#125; /&gt;</span></div><div class="line"><span class="string">    &#125;</span></div><div class="line"><span class="string">&#125;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">ReactDOM.render(&lt;RedditFetch subreddit="reactjs" /&gt;,document.getElementById('root'))</span></div></pre></td></tr></table></figure>
<p>å°ç»“</p>
<ul>
<li>Reactç»„ä»¶æ¸²æŸ“åŒ…æ‹¬ä¸‰ä¸ªæµç¨‹ï¼šæŒ‚è½½æµç¨‹ã€æ›´æ–°æµç¨‹ã€å¸è½½æµç¨‹ã€‚</li>
<li>å„ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šåœ¨ç‰¹å®šçš„æ—¶å€™è§¦å‘å¹¶é€‚ç”¨äºä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚</li>
<li>é€šè¿‡ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°æˆ‘ä»¬å¯ä»¥å¯¹åº”ç”¨è¿›è¡Œæ›´ç²¾å‡†çš„æ§åˆ¶ã€‚</li>
<li>å¦‚æœä½ éœ€è¦å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå°†å…¶å®‰æ’åœ¨é€‚åˆçš„ç”Ÿå‘½å‡½æ•°å‘¨æœŸä¸­ã€‚</li>
</ul>
<h3 id="è¡¨å•åŠäº‹ä»¶å¤„ç†"><a href="#è¡¨å•åŠäº‹ä»¶å¤„ç†" class="headerlink" title="è¡¨å•åŠäº‹ä»¶å¤„ç†"></a>è¡¨å•åŠäº‹ä»¶å¤„ç†</h3><p>JSXä¸­ä½¿ç”¨çš„å’ŒHTMLåŒåçš„å…ƒç´ ï¼Œå¹¶ä¸ç­‰åŒäºåŸç”Ÿçš„HTMLæ ‡ç­¾ï¼Œåªæ˜¯ReactæŠ½è±¡å‡ºæ¥çš„ä¸€ç§æ ‡ç­¾çš„å†™æ³•ã€‚ä¸¾ä¸ªä¾‹å­ </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;textarea value=&#123;<span class="keyword">this</span>.state.value&#125; onChange=&#123;<span class="keyword">this</span>.handleChange&#125;/&gt;</div><div class="line"></div><div class="line">&lt;select value=&#123;<span class="keyword">this</span>.state.value&#125; onChange=&#123;<span class="keyword">this</span>.handleChange&#125;&gt;</div><div class="line">    &lt;option value=<span class="string">"grapefruit"</span>&gt;Grapefruit&lt;<span class="regexp">/option&gt;</span></div><div class="line"><span class="regexp">    &lt;option value="lime"&gt;Lime&lt;/</span>option&gt;</div><div class="line">    &lt;option value=<span class="string">"coconut"</span> &gt;Coconut&lt;<span class="regexp">/option&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>select&gt;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">textarea</span> &gt;</span></div><div class="line">    Hello , React !</div><div class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"grapefruit"</span>&gt;</span>Grapefruit<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"lime"</span>&gt;</span>Lime<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"coconut"</span> <span class="attr">select</span> &gt;</span>Coconut<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div></pre></td></tr></table></figure>
<p>äº‹ä»¶ä¹Ÿæ˜¯Reactå†…éƒ¨å°è£…çš„ï¼Œç”±å°é©¼å³°å‘½åï¼Œå¹¶ä¸ç­‰åŒäºHTML DOMçš„åŸç”Ÿäº‹ä»¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€<a href="https://facebook.github.io/react/docs/events.html" target="_blank" rel="external">link</a>æŸ¥çœ‹ã€‚</p>
<h2 id="Redux-æ•°æ®å¤„ç†"><a href="#Redux-æ•°æ®å¤„ç†" class="headerlink" title="Redux æ•°æ®å¤„ç†"></a>Redux æ•°æ®å¤„ç†</h2><h3 id="Reduxç®€ä»‹"><a href="#Reduxç®€ä»‹" class="headerlink" title="Reduxç®€ä»‹"></a>Reduxç®€ä»‹</h3><p>ReactæŠ€æœ¯æ ˆçš„ä¸»è¦é€‚ç”¨æƒ…æ™¯æ˜¯Webåº”ç”¨ï¼ŒWebåº”ç”¨æ¶‰åŠéå¸¸å¤šçš„ç”¨æˆ·äº¤äº’å’ŒçŠ¶æ€æ•°æ®æ”¹å˜ã€‚æˆ‘ä»¬åº”è¯¥å°½é‡æ§åˆ¶åº”ç”¨ä¸­æœ‰çŠ¶æ€ç»„ä»¶çš„ä¸ªæ•°ï¼Œåº”ç”¨æ•°æ®åº”è¯¥å°½é‡é›†ä¸­ç»Ÿä¸€ç®¡ç†ï¼Œå¦åˆ™åæœŸç»´æŠ¤æˆæœ¬è¾ƒé«˜ã€‚ä¹‹å‰ä»‹ç»æœ‰çŠ¶æ€ç»„ä»¶ä¸æ— çŠ¶æ€ç»„ä»¶ï¼ŒReactä¹Ÿæ¨èæˆ‘ä»¬æ§åˆ¶æœ‰çŠ¶æ€ç»„ä»¶çš„ä¸ªæ•°ï¼Œåœ¨æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­ç¼–å†™çš„90%éƒ½åº”è¯¥æ˜¯æ— çŠ¶æ€ç»„ä»¶ã€‚Reactæœ¬èº«æä¾›ç»™æˆ‘ä»¬æ§åˆ¶å¼•ç”¨æ•°æ®çš„æ–¹å¼åªæœ‰propsã€state åŠå¸¦æœ‰å®éªŒæ€§è´¨çš„contextã€‚Reactæœ¬èº«å¹¶æ²¡æœ‰æä¾›åº”ç”¨çŠ¶æ€ç®¡ç†çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨å°çš„åº”ç”¨ä¸­å¯èƒ½æ„Ÿå—ä¸åˆ°çŠ¶æ€ç®¡ç†æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä½†éšç€åº”ç”¨å¤æ‚åº¦çš„å¢åŠ ï¼Œè¿™ä¸ªé—®é¢˜å°±ä¼šæš´éœ²å¾—è¶Šæ¥è¶Šæ˜æ˜¾ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨Reduxã€‚</p>
<p>æ—¢ç„¶Reactæ¨èæˆ‘ä»¬å°½é‡å°‘çš„ç¼–å†™æœ‰çŠ¶æ€ç»„ä»¶ï¼Œä¸ºä½•ä¸å¹²è„†æŠŠä¸€ä¸ªåº”ç”¨æ‰€æœ‰çš„çŠ¶æ€æ•°æ®é›†ä¸­åˆ°ä¸€ä¸ªåœ°æ–¹ç®¡ç†å‘¢ï¼Ÿè¿™ä¾¿æ˜¯Reduxçš„ç†å¿µã€‚ReduxæŠŠåº”ç”¨çš„æ•°æ®ç»Ÿä¸€å‚¨å­˜åœ¨ä¸€ä¸ªå¯¹è±¡å½“ä¸­ï¼ŒæŠŠåº”ç”¨çš„æ‰€æœ‰çš„æ•°æ®äº¤äº’åŠå¼•ç”¨çŠ¶æ€çš„æ”¹å˜ç»Ÿä¸€ç”¨å›ºå®šå½¢å¼çš„actionåŠ¨ä½œå¯¹è±¡æ¥æè¿°ï¼Œå¹¶ç”±reducerçš„æ–¹æ³•æ¥åˆ¤æ–­ä¸åŒçš„åŠ¨ä½œå¦‚ä½•æ”¹å˜å¼•ç”¨çŠ¶æ€ï¼Œæœ€åé€šè¿‡storeå¯¹è±¡æ¥æ‰§è¡ŒactionåŠ¨ä½œè·å–stateåº”ç”¨çŠ¶æ€ï¼Œå¹¶è§¦å‘æ”¹å˜åº”ç”¨çŠ¶æ€çš„äº‹ä»¶ã€‚</p>
<p>å®é™…ä¸ŠReduxæä¾›çš„æ˜¯ä¸€ç§åº”ç”¨çŠ¶æ€çš„è§£å†³æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åŸºæœ¬çš„åŸç”ŸJSæ–¹æ³•æ¥å®ç°Reduxçš„å…¨éƒ¨åŠŸèƒ½ã€‚å¹¶ä¸”æˆ‘ä»¬å°±ç®—å¼•å…¥Reduxç¼–å†™çš„å¤§éƒ¨åˆ†çš„æ˜¯åŸç”Ÿçš„JSå‡½æ•°å’Œå¯¹è±¡ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ ï¼ŒåŸç”ŸJSæ¨¡æ‹Ÿå®ç°Reduxã€‚<br>é¦–å…ˆå®šä¹‰ä¸€ä¸ªcounterçš„å‡½æ•°ï¼Œæ¥å—stateå’Œactionå‚æ•°ã€‚stateå°±æ˜¯çŠ¶æ€æ•°æ®ï¼Œè€Œactionæ˜¯ä¸€ä¸ªå¸¦æœ‰typeçš„jså¯¹è±¡ã€‚é€šè¿‡å¯¹typeçš„åˆ¤æ–­ï¼Œè¿”å›æ–°çš„stateï¼Œè¿™æ ·çš„å‡½æ•°åœ¨reduxä¸­è¢«ç§°ä¸ºredcerã€‚é€šè¿‡counterè¿”å›çš„é»˜è®¤å€¼ä½œä¸ºå®¹å™¨çš„åˆå§‹stateå€¼ï¼Œä¸ºç»„ä»¶æ·»åŠ incrementã€decrementæ–¹æ³•ï¼Œäº‹å®ä¸Šéƒ½æ˜¯è°ƒç”¨dispatchæ–¹æ³•ã€‚åœ¨dispatchæ–¹æ³•ä¸­è°ƒç”¨counterå‡½æ•°ï¼Œå°†å…ˆç”¨çš„åº”ç”¨çŠ¶æ€å’Œactionæ–¹æ³•ä¼ é€’</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="comment">// Reducer</span></div><div class="line"><span class="keyword">const</span> counter = <span class="function">(<span class="params">state = &#123; value: <span class="number">0</span> &#125;, action</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'INCREMENT'</span>:</div><div class="line">            <span class="keyword">return</span> &#123; <span class="attr">value</span>: state.value + <span class="number">1</span> &#125;;</div><div class="line">        <span class="keyword">case</span> <span class="string">'DECREMENT'</span>:</div><div class="line">            <span class="keyword">return</span> &#123; <span class="attr">value</span>: state.value - <span class="number">1</span> &#125;;</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="comment">// State</span></div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">        <span class="keyword">this</span>.state = counter(<span class="literal">undefined</span>,&#123;&#125;)</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    dispatch(action) &#123;</div><div class="line">        <span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> counter(prevState, action));</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// Action</span></div><div class="line">    increment = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">this</span>.dispatch(&#123; <span class="attr">type</span>: <span class="string">'INCREMENT'</span> &#125;);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    decrement = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">this</span>.dispatch(&#123; <span class="attr">type</span>: <span class="string">'DECREMENT'</span> &#125;);</div><div class="line">    &#125;;</div><div class="line">  </div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div&gt;</div><div class="line">                &#123;<span class="keyword">this</span>.state.value&#125;</div><div class="line">                &lt;button onClick=&#123;<span class="keyword">this</span>.increment&#125;&gt;+<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line">                &lt;button onClick=&#123;<span class="keyword">this</span>.decrement&#125;&gt;-<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line">            &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">        )</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div></pre></td></tr></table></figure>
<p>æœ€åï¼š</p>
<ul>
<li>ä¸è¦ä¸ºäº†â€œç”¨æ¡†æ¶â€è€Œç”¨æ¡†æ¶</li>
<li>çœŸæ­£é‡åˆ°éœ€è¦è¿™äº›å·¥å…·æ¥è§£å†³é—®é¢˜æ—¶å†å»å®é™…åº”ç”¨</li>
<li><a href="http://cn.redux.js.org/" target="_blank" rel="external">Reduxå®˜ç½‘</a></li>
<li>ä½ å¯èƒ½ä¸éœ€è¦ç”¨åˆ°Redux</li>
</ul>
<h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><p>Action æ˜¯å¸¦æœ‰typeå±æ€§çš„jså¯¹è±¡ã€‚<code>{ type: &#39;INCREMENT&#39; }</code>åœ¨Reduxçš„åº”ç”¨æ“ä½œä¸­ï¼Œæˆ‘ä»¬è¦æŠŠæ‰€æœ‰æ”¹å˜åº”ç”¨çŠ¶æ€çš„æ“ä½œï¼Œè§„èŒƒä¸ºä¸€ä¸ªä¸ªActionã€‚åœ¨Actionå½“ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥èµ‹ä¸Šè¦ç”¨æ¥ä¿®æ”¹åº”ç”¨çŠ¶æ€stateçš„å…·ä½“æ•°æ®<code>{ type: &#39;INCREMENT&#39;, num: 1 }</code>ã€‚ä¸Šè¿°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤ç‚¹Actionçš„ä½œç”¨ï¼š</p>
<ul>
<li>å®šä¹‰æˆ‘ä»¬çš„åº”ç”¨å¯ä»¥è¿›è¡Œæ“ä½œçš„åŠ¨ä½œæˆ–è€…æ“ä½œçš„ç±»å‹</li>
<li>ä¼ é€’æ”¹å˜å¼•ç”¨çŠ¶æ€çš„æ•°æ®</li>
</ul>
<p>Actionçš„å®šä¹‰è¦éµä»ä¸€å®šçš„æ ‡å‡†ï¼š<a href="https://github.com/acdlite/flux-standard-action" target="_blank" rel="external">Flux æ ‡å‡† Action</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="comment">// Action ç±»å‹</span></div><div class="line">    type: <span class="string">'INCREMENT'</span>,</div><div class="line">    <span class="comment">// payload ä¸­è¿”å›æˆ‘ä»¬è¦ä¼ é€’çš„æ•°æ®ï¼Œç”¨æ¥ä¿®æ”¹state</span></div><div class="line">    paload: &#123;</div><div class="line">        num: <span class="number">1</span></div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// payload æ•°æ®æœªè·å–æˆåŠŸæ—¶è¿”å›true</span></div><div class="line">    error:<span class="literal">false</span>,</div><div class="line">    <span class="comment">// ä¸€äº›ä¸å¿…è¦åœ¨ paload ä¸­ä¼ é€’çš„å…¶ä»–æ•°æ®</span></div><div class="line">    meta: &#123;</div><div class="line">        success: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ºäº†é˜²æ­¢æˆ‘ä»¬ä»£ç ä¸­å‡ºç°å¾ˆå¤šå†™æ­»çš„æ•°å€¼ï¼Œå‡å°‘hard codeï¼Œå¯ä»¥ä½¿ç”¨Reduxå½“ä¸­action creatorçš„æ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> counterActionGenerator = <span class="function">(<span class="params">type, num</span>) =&gt;</span> (num) =&gt; &#123;</div><div class="line">    <span class="keyword">let</span> action = &#123; type , num &#125;</div><div class="line">    <span class="keyword">return</span> action</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> addNumber = counterActionGenerator(<span class="string">'INCREMENT'</span>, <span class="literal">null</span> )</div><div class="line"><span class="keyword">const</span> minsNumber = counterActionGenerator(<span class="string">'DECREMENT'</span>, <span class="literal">null</span> )</div></pre></td></tr></table></figure>
<p>ä¸ºäº†æ¸…æ™°çš„è¡¨è¾¾æˆ‘ä»¬æ‰€æœ‰actionåŠ¨ä½œï¼Œå¯ä»¥åœ¨åº”ç”¨çš„å¼€å¤´ï¼Œæˆ–è€…ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ä¸­å®šä¹‰æ‰€æœ‰çš„action typeã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> INCREMENT = <span class="string">'INCREMENT'</span></div><div class="line"><span class="keyword">const</span> DECREMENT = <span class="string">'DECREMENT'</span></div></pre></td></tr></table></figure>
<ul>
<li>å®šä¹‰actionç±»å‹çš„æ–‡ä»¶ç±»ä¼¼äºä¸€ä¸ªè¯´æ˜æ–‡æ¡£ï¼Œå½“ä½ æƒ³è¦ä¸ºåº”ç”¨æ·»åŠ æ–°ç‰¹æ€§æ—¶ï¼Œå¯ä»¥æŸ¥é˜…åº”ç”¨å·²æœ‰çš„actionç±»å‹ï¼Œé¿å…å†²çªã€‚</li>
<li>åœ¨ç‰ˆæœ¬ç®¡ç†ä¸Šä¹Ÿå¯ä»¥æ¸…æ™°çœ‹åˆ°actionçš„è®°å½•çš„å¢åˆ æ”¹æŸ¥ã€‚</li>
<li>å¦‚æœå‘ç°é”™è¯¯ï¼Œåœ¨importå°±ä¼šå‘ç°ä»£ç æŠ¥é”™ï¼Œæ›´å¿«çš„è¿›è¡Œè°ƒè¯•ã€‚</li>
</ul>
<h3 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a>Reducer</h3><p>åœ¨ä¹‹å‰å‡½æ•°ä¸­å®šä¹‰äº† counter å‡½æ•°ï¼Œå®ƒçš„å†…éƒ¨æ—¶ä¸€ä¸ªswitchç»“æ„ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œstate å’Œ action ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„state ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Reducer</span></div><div class="line"><span class="keyword">const</span> counter = <span class="function">(<span class="params">state = &#123; value: <span class="number">0</span> &#125;, action</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'INCREMENT'</span>:</div><div class="line">            <span class="keyword">return</span> &#123; <span class="attr">value</span>: state.value + <span class="number">1</span> &#125;;</div><div class="line">        <span class="keyword">case</span> <span class="string">'DECREMENT'</span>:</div><div class="line">            <span class="keyword">return</span> &#123; <span class="attr">value</span>: state.value - <span class="number">1</span> &#125;;</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°†ä¸Šè¿°çš„è¿™ä¸ªå‡½æ•°æŠ½è±¡ä¸ºè¿™ä¸ªå…¬å¼ï¼Œæ›´å…·ä¸šåŠ¡ç°æœ‰çš„çŠ¶æ€ï¼Œæ›´å…·è§¦å‘çš„action ï¼Œè¿”å›æ–°çš„çŠ¶æ€çš„å‡½æ•°ç§°ä¹‹ä¸º Reducerã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(previousState, action ) =&gt; newState</div></pre></td></tr></table></figure>
<p>ä¹‹æ‰€ä»¥å°†è¿™æ ·çš„å‡½æ•°ç§°ä¹‹ä¸ºreducerï¼Œæ˜¯å› ä¸ºè¿™ç§å‡½æ•°ä¸è¢«ä¼ å…¥ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="external">Array.prototype.reduce(reducer, ?initialValue)</a>é‡Œçš„å›è°ƒå‡½æ•°å±äºç›¸åŒçš„ç±»å‹ã€‚Reducerå¯ä»¥å‹‰å¼ºç¿»è¯‘ä¸ºç¼©å‡å™¨æˆ–æŠ˜å å™¨ã€‚</p>
<p>reduceå±äºä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒå°†å…¶ä¸­çš„å›è°ƒå‡½æ•°reduceré€’å½’åº”ç”¨åˆ°æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ä¸Šï¼Œå¹¶è¿”å›ä¸€ä¸ªç‹¬ç«‹çš„å€¼ï¼Œè¿™å°±æ˜¯ç¼©å‡æŠ˜å çš„æ„ä¹‰æ‰€åœ¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sum = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">acc, val</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> acc + val</div><div class="line">&#125;, <span class="number">0</span>)</div><div class="line"></div><div class="line"><span class="comment">/* æ³¨æ„è¿™é‡Œå½“ä¸­çš„å›è°ƒå‡½æ•°(prev,curr) =&gt; prev + curr</span></div><div class="line"><span class="comment">*  ä¸æˆ‘ä»¬reduxå½“ä¸­çš„reduceræ¨¡å‹ (previousState, action ) =&gt; newState çœ‹èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç›¸ä¼¼ï¼Ÿ</span></div><div class="line"><span class="comment">*/</span></div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].reduce( <span class="function">(<span class="params">prev, curr</span>) =&gt;</span> prev + curr )</div><div class="line"></div><div class="line"><span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action </span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'ADD_TODO'</span>:</div><div class="line">            <span class="keyword">return</span> [</div><div class="line">            <span class="comment">//ES7å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦å†™æ³•</span></div><div class="line">            ...state,</div><div class="line">            &#123;</div><div class="line">                id:action:id,</div><div class="line">                text:action.text,</div><div class="line">                completed:<span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">            ]</div><div class="line">        <span class="comment">// ä¸çŸ¥é“actionç±»å‹çš„è¯è¿”å›é»˜è®¤state</span></div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> state</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>reducerçš„ä¸»ä½“ï¼Œæ˜¯ä¸€ä¸ªswitchç»“æ„çš„è¿ç®—,ä»–åªæ˜¯æ›´å…·ä¼ å…¥çš„stateå’Œactionï¼Œæ¥åˆ¤æ–­è¿”å›ä¸€ä¸ªæ–°çš„stateã€‚å®ƒå¿…é¡»æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¸å¯ä»¥ä¿®æ”¹å½±å“è¾“å…¥å€¼ï¼ˆéœ€è¦æ·±æ‹·è´ï¼‰ï¼Œå¹¶ä¸”æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆå¼‚æ­¥è°ƒç”¨ã€å½±å“ä½œç”¨åŸŸâ€¦)ã€‚æ°¸è¿œä¸è¦åœ¨ reducer é‡Œåšè¿™äº›æ“ä½œï¼š</p>
<ul>
<li>ä¿®æ”¹ä¼ å…¥å‚æ•°ï¼›</li>
<li>æ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œå¦‚ API è¯·æ±‚å’Œè·¯ç”±è·³è½¬ï¼›</li>
<li>è°ƒç”¨éçº¯å‡½æ•°ï¼Œå¦‚ Date.now() æˆ– Math.random()ã€‚</li>
</ul>
<p>Reactåº”ç”¨å½“ä¸­æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œç•Œé¢ä¹Ÿè¦è·Ÿéšç›¸åº”æ”¹å˜ï¼Œé‡æ–°æ¸²æŸ“ï¼Œè¿™è¿™ä¸€æ­¥ä¹‹é—´éœ€è¦ä¸€ä¸ªæ¯”è¾ƒå·®å¼‚çš„diffæ“ä½œï¼Œå› æ­¤æ”¹å˜å‰åçš„æ•°æ®éƒ½è¦è¢«ä½¿ç”¨åˆ°ã€‚å¦å¤–ï¼Œå®ç°ä¸€äº›è¯¸å¦‚æ—…è¡Œçš„åŠŸèƒ½ä¹Ÿéœ€è¦ä¾èµ–ä¸å¯å˜æ•°æ®ã€‚</p>
<h3 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h3><p>Storeæ˜¯æˆ‘ä»¬å­˜å‚¨çŠ¶æ€æ•°æ®stateçš„åœ°æ–¹ï¼Œæˆ‘ä»¬é€šè¿‡reduxä¸­createStoreçš„æ–¹æ³•ï¼Œä¼ å…¥reducerå‡½æ•°æ¥åˆ›å»ºstoreã€‚</p>
<ul>
<li>getState è·å–å½“å‰çŠ¶æ€æ•°æ®</li>
<li>dispath æ‰§è¡Œaction</li>
<li>subscribe è®¢é˜…å½“å‰çŠ¶æ€æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶è§¦å‘çš„äº‹ä»¶</li>
</ul>
<p>åŸç”Ÿæ¨¡æ‹ŸcreateStore </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> createStore = <span class="function">(<span class="params">reducer</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> state;</div><div class="line">    <span class="keyword">let</span> listeners = [];</div><div class="line">    <span class="comment">// è¿”å›å½“å‰çš„state</span></div><div class="line">    <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> state;</div><div class="line">    <span class="comment">// æ ¹æ®actionè°ƒç”¨reducerè¿”å›æ–°çš„stateå¹¶è§¦å‘listener</span></div><div class="line">    <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</div><div class="line">        state = reducer(state,action);</div><div class="line">        listeners.forEach(<span class="function"><span class="params">listeners</span> =&gt;</span> listener())</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/* è¿™é‡Œçš„subscribeæœ‰ä¸¤ä¸ªåŠŸèƒ½</span></div><div class="line"><span class="comment">    * è°ƒç”¨ subscribe(listener)ä¼šä½¿ç”¨listeners.push(listener)æ³¨å†Œä¸€ä¸ªlistener</span></div><div class="line"><span class="comment">    * è°ƒç”¨ subscribe çš„è¿”å›å‡½æ•°åˆ™ä¼šæ³¨é”€æ‰listener</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</div><div class="line">        listeners.push(listerer);</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            listeners = listerers.filter( <span class="number">1</span> =&gt; <span class="number">1</span> !== listener);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// è¿”å›ä¸‰ä¸ªä¸»è¦æ–¹æ³•</span></div><div class="line">    <span class="keyword">return</span> &#123; getState, dispatch, subscribe &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Middleware"><a href="#Middleware" class="headerlink" title="Middleware"></a>Middleware</h3><p>Middlewareå¯ä»¥ç¿»è¯‘ä¸ºä¸­é—´ä»¶ï¼Œä¾‹å¦‚ç½‘ç«™ä¸­æŸäº›è®¿é—®é™åˆ¶çš„éªŒè¯åŠŸèƒ½æ¨¡å—å°±å¯ä»¥å½“ä½œä¸€ä¸ªmiddlewareã€‚Reduxä¹Ÿå¯ä»¥åº”ç”¨middlewareçš„æ¦‚å¿µå®ç°ä¸€äº›ä¾‹å¦‚æ—¥å¿—è®°å½•è°ƒè¯•è¾“å‡ºç­‰åŠŸèƒ½ã€‚</p>
<p>ä¾‹å¦‚æˆ‘ä»¬æƒ³çŸ¥é“æ•°æ®å‰åå‘ç”Ÿçš„å˜åŒ–ï¼Œæœ€ç›´æ¥çš„åŠæ³• ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="string">'prev state'</span>,store.getState())</div><div class="line">store.dispatch(action)</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'next state'</span>,store.getState())</div></pre></td></tr></table></figure>
<p>æ‰‹åŠ¨ä¿®æ”¹dispathçš„æ–¹æ³• </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> store = createStore(counter)</div><div class="line"><span class="comment">// å°†åŸæœ¬çš„dispatchæ–¹æ³•ä¿ç•™å¹¶é™„ä¸Šæ§åˆ¶å°è¯­å¥</span></div><div class="line"><span class="keyword">let</span> next = store.dispatch</div><div class="line">store.dispatch = <span class="function"><span class="keyword">function</span> <span class="title">dispatchAndLog</span>(<span class="params">action</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'prev state'</span>,store.getState())</div><div class="line">    <span class="keyword">let</span> result = next(action)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'next state'</span>,store.getState())</div><div class="line">    <span class="keyword">return</span> result</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç›´æ¥ä¿®æ”¹dispathåŸç”Ÿæ–¹æ³•æ˜¯æ¯”è¾ƒè„çš„å¤„ç†ï¼Œå¹¶ä¸”æœ‰æ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨å¤šä¸ªmiddlewareï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠå®ƒä¸dispatchçš„é€»è¾‘æ‹†åˆ†å¼€æ¥ã€‚åœ¨å®é™…ä¸­å¯ä»¥å†reduxä¸­å¼•å…¥applyMiddleware æ–¹æ³• </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; createStore , applyMiddleware &#125; = Redux;</div><div class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">store</span> =&gt;</span> next =&gt; <span class="function"><span class="params">action</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'dispatching'</span>, action)</div><div class="line">    <span class="keyword">let</span> result = next(action)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'next state'</span>, store.getState())</div><div class="line">    <span class="keyword">return</span> result</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> store = createStore(counter,</div><div class="line">    applyMiddleware(loggerMiddleware))</div></pre></td></tr></table></figure>
<h3 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h3><p>react å’Œ redux çš„ä½¿ç”¨ </p>
<p>åœ¨ä¹‹å‰ä½¿ç”¨reatæ—¶ï¼Œæˆ‘ä»¬æŠŠæ•°æ®æ”¾åˆ°stateï¼Œé€šè¿‡setStateå¯ä»¥è§¦å‘reactçš„æ›´æ–°æ¸²æŸ“ï¼Œè€Œç›®å‰çŠ¶æ€æ•°æ®éƒ½äº¤ç”±reduxç®¡ç†ã€‚reduxæ•°æ®çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç›¸åº”çš„æ˜¯æˆ‘ä»¬é€šè¿‡subscribeæ–¹æ³•ç»‘å®šçš„listenerã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»‘å®šä¸€ä¸ªæ¯”è¾ƒåˆé€‚çš„ç›‘å¬å‡½æ•°ä½œä¸ºçŠ¶æ€å˜åŒ–æ—¶çš„ç›¸åº”ï¼Œreactæä¾›äº†ä¸»åŠ¨è§¦å‘reactæ›´æ–°æ¸²æŸ“çš„æ–¹æ³•<code>forceUpdate</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> INCREMENT = <span class="string">'INCREMENT'</span></div><div class="line"><span class="keyword">const</span> DECREMENT = <span class="string">'DECREMENT'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> counter = <span class="function">(<span class="params">state = <span class="number">0</span>, action</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> INCREMENT:</div><div class="line">      <span class="keyword">return</span> state + <span class="number">1</span>;</div><div class="line">    <span class="keyword">case</span> DECREMENT:</div><div class="line">      <span class="keyword">return</span> state - <span class="number">1</span>;</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">      <span class="keyword">return</span> state;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = createStore(counter)</div><div class="line"></div><div class="line"><span class="comment">//å±•ç¤ºç»„ä»¶</span></div><div class="line"><span class="keyword">const</span> Counter = (&#123; </div><div class="line">  count, onIncrement, onDecrement &#125;) =&gt; (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;h1&gt;&#123;count&#125;&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">    &lt;button onClick=&#123;onIncrement&#125;&gt;+&lt;/</span>button&gt;</div><div class="line">    &lt;button onClick=&#123;onDecrement&#125;&gt;-<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">)</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">/</span><span class="regexp">/ å®¹å™¨ç»„ä»¶</span></div><div class="line"><span class="regexp">class CounterContainer extends React.Component &#123;</span></div><div class="line"><span class="regexp">    componentDidMount() &#123;</span></div><div class="line"><span class="regexp">        this.unsubscribe = store.subscribe( () = &gt; &#123;</span></div><div class="line"><span class="regexp">            this.forceUpdate()</span></div><div class="line"><span class="regexp">        &#125;)</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">    </span></div><div class="line"><span class="regexp">    componentWillUnmount() &#123;</span></div><div class="line"><span class="regexp">        this.unsubscribe()</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">    </span></div><div class="line"><span class="regexp">    render()&#123;</span></div><div class="line"><span class="regexp">        return &lt;Counter </span></div><div class="line"><span class="regexp">            value=&#123; store.getState() &#125; </span></div><div class="line"><span class="regexp">            onIncrement = &#123; () =&gt; store.dispatch(&#123;type: INCREMENT&#125;) &#125; </span></div><div class="line"><span class="regexp">            onDecrement = &#123; () =&gt; store.dispatch(&#123;type: DECREMENT&#125;) &#125; </span></div><div class="line"><span class="regexp">        /</span>&gt;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">CounterContainer</span> /&gt;</span>,document.getElementById('root'))</span></div></pre></td></tr></table></figure>
<p>Reactæ˜¯æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¡†æ¶ï¼Œè€ŒReduxæ˜¯ä¸ºäº†è§£å†³çŠ¶æ€ç®¡ç†é—®é¢˜ä¸“é—¨å¼€å‘çš„åº“ï¼Œä¸¤è€…é€‚åˆæ­é…ä½†ä½¿ç”¨ä¸æ˜¯å¿…é¡»ã€‚Reactå®˜æ–¹ä¸“é—¨æä¾›äº†è¿æ¥reactå’Œreduxçš„åº“ï¼Œreact-reduxã€‚react-reduxä¸»è¦æä¾›ä¸¤ä¸ªæ–¹æ³•</p>
<ul>
<li>provider æ˜¯å‘æ•´ä¸ªåº”ç”¨ä¼ é€’storeå®¹å™¨ç»„ä»¶</li>
<li>connect æ–¹æ³•å¯ä»¥æ›´å…·ç”¨æˆ·å±•ç¤ºç»„ä»¶è‡ªåŠ¨ç”Ÿæˆå¯¹åº”å®¹å™¨ç»„ä»¶</li>
</ul>
<p>providerå°±åƒæˆ‘ä»¬ä¼ é€’storeç”¨çš„å®¹å™¨ç»„ä»¶ï¼Œä¸€èˆ¬éƒ½ä¼šå¥—åœ¨åº”ç”¨ç»„ä»¶çš„æœ€å¤–å±‚ã€‚è€Œconnectæ–¹æ³•å¯ä»¥æ ¹æ®æˆ‘ä»¬ç°æœ‰çš„å±•ç¤ºç»„ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆå®¹å™¨ç»„ä»¶ã€‚connectéœ€è¦ä¼ é€’2ä¸ªå‚æ•°ï¼ŒmapStateToPropsï¼Œç”¨æ¥å¯¹åº”stateå’Œpropsï¼Œå¹¶ä¸”ä¼ å…¥å‚æ•°æ—¶ï¼Œåœ¨æˆ‘ä»¬reduxå‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘ç»„ä»¶çš„æ›´æ–°ã€‚mapDispatchToPropsï¼Œé€šè¿‡dispatchæ¥ä¼ é€’å¯¹åº”çš„æ–¹æ³•æ¥è§¦å‘actionäº‹ä»¶ã€‚connectåœ¨è·å–äº†reduxçš„storeä¹‹åï¼Œå†æ›´å…·æˆ‘ä»¬ä¼ å…¥çš„æ–¹æ³•æŠŠæˆ‘ä»¬éœ€è¦çš„éƒ¨åˆ†å¯¹åº”åˆ°propså±æ€§å½“ä¸­ï¼Œå†ä¼ é€’åˆ°æˆ‘ä»¬çš„ç»„ä»¶é‡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'reat'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span></div><div class="line"><span class="keyword">import</span> &#123; Provider ,connect &#125; = <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> INCREMENT = <span class="string">'INCREMENT'</span></div><div class="line"><span class="keyword">const</span> DECREMENT = <span class="string">'DECREMENT'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> counter = <span class="function">(<span class="params">state = <span class="number">0</span>, action</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> INCREMENT:</div><div class="line">      <span class="keyword">return</span> state + <span class="number">1</span>;</div><div class="line">    <span class="keyword">case</span> DECREMENT:</div><div class="line">      <span class="keyword">return</span> state - <span class="number">1</span>;</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">      <span class="keyword">return</span> state;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = createStore(counter)</div><div class="line"></div><div class="line"><span class="comment">//å±•ç¤ºç»„ä»¶</span></div><div class="line"><span class="keyword">const</span> Counter = (&#123; </div><div class="line">  count, onIncrement, onDecrement &#125;) =&gt; (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;h1&gt;&#123;count&#125;&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">    &lt;button onClick=&#123;onIncrement&#125;&gt;+&lt;/</span>button&gt;</div><div class="line">    &lt;button onClick=&#123;onDecrement&#125;&gt;-<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">)</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">Counter.propTypes = &#123;</span></div><div class="line"><span class="regexp">    count: PropTypes.number.isRequired,</span></div><div class="line"><span class="regexp">    onIncrement: PropTypes.func.isRequired,</span></div><div class="line"><span class="regexp">    onDecrement: PropTypes.func.isRequired,</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">const = mapStateToProps = (state) =&gt; (</span></div><div class="line"><span class="regexp">    &#123;</span></div><div class="line"><span class="regexp">        count:state</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">)</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">const = mapDispatchToProps = (dispatch) =&gt; &#123;</span></div><div class="line"><span class="regexp">    onIncrement: () =&gt; &#123;</span></div><div class="line"><span class="regexp">        dispatch(&#123;type: INCREMENT&#125;)</span></div><div class="line"><span class="regexp">    &#125;,</span></div><div class="line"><span class="regexp">    onDecrement: () =&gt; &#123;</span></div><div class="line"><span class="regexp">        dispatch(&#123;type: DECREMENT&#125;)</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">/</span><span class="regexp">/ å®¹å™¨ç»„ä»¶</span></div><div class="line"><span class="regexp">const CounterContainer = connect(mapStateToProps, mapDispatchToProps)(Counter)</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">ReactDOM.render(</span></div><div class="line"><span class="regexp">    &lt;Provider store=&#123;store&#125;&gt;</span></div><div class="line"><span class="regexp">        &lt;CounterContainer /</span>&gt;</div><div class="line">    &lt;<span class="regexp">/Provider&gt;</span></div><div class="line"><span class="regexp">    ,document.getElementById('root'))</span></div></pre></td></tr></table></figure>
<p>react-reduxå®ç°äº†å¾ˆå¤šä¼˜åŒ–ï¼Œä¸ä¼šåƒReactDOM.renderå’Œ foreUpdateä¸€æ ·è€—è´¹æ•ˆç‡ï¼Œæ­£å¼å¼€å‘ä¸­å»ºè®®ä½¿ç”¨react-reduxã€‚</p>
<h2 id="react-router-4"><a href="#react-router-4" class="headerlink" title="react-router 4"></a>react-router 4</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>åœ¨webå¼€å‘ä¸­ï¼Œå‰ç«¯æ‰®æ¼”ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²ã€‚è·¯ç”±åŠŸèƒ½å¯ä»¥ç”±å‰ç«¯æ¥å®ç°ï¼Œæ— éœ€åç«¯è¿”å›é¡µé¢ï¼Œé€šè¿‡å‰ç«¯è·¯ç”±å®ç°URLçš„æ”¹å˜ä»¥åŠå¯¹é¡µé¢çš„åˆ‡æ¢ã€‚è¾ƒæ—©ä¹‹å‰å®ç°å‰ç«¯è·¯ç”±çš„æ–¹æ³•ï¼Œåœ¨Angular1ä¸­æ—¶é€šè¿‡hash(#)æ¥å¤„ç†ï¼Œä¹Ÿå°±æ˜¯å¸¦#å·çš„é”šç‚¹ã€‚å‰ç«¯è·¯ç”±å¤šç§å¤šæ ·ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ“ä½œDOMçš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History" target="_blank" rel="external">histroy</a>å¯¹è±¡ï¼Œä½¿ç”¨<code>history.pushState</code>,<code>window.onpopstate</code>è¿™2ä¸ªæ–¹æ³•æ¥å®ç°ã€‚</p>
<p>å‰ç«¯è·¯ç”±ä¸»è¦å®ç°2ä¸ªéƒ¨åˆ†çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>æ”¹å˜å½“å‰URLåœ°å€</li>
<li>æ›´å…·URLåœ°å€å¯¹å½“å‰é¡µé¢è¿›è¡Œåˆ‡æ¢</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/home"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/blog"</span>&gt;</span>Blog<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/about"</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>History state:<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"state"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä¿®æ”¹ history pushState</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">history</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> pushState = history.pushState;</div><div class="line">    history.pushState = <span class="function"><span class="keyword">function</span>(<span class="params">state</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> history.onpushstate == <span class="string">"function"</span>) &#123;</div><div class="line">            history.onpushstate(&#123;<span class="attr">state</span>: state&#125;);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pushState.apply(history, <span class="built_in">arguments</span>);</div><div class="line">    &#125;</div><div class="line">&#125;)(<span class="built_in">window</span>.history);</div><div class="line"><span class="comment">// æ·»åŠ è§¦å‘äº‹ä»¶</span></div><div class="line"><span class="built_in">window</span>.onpopstate = history.onpushstate = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'state'</span>).innerHTML = <span class="string">"location: "</span> + <span class="built_in">document</span>.location + <span class="string">", state: "</span> + <span class="built_in">JSON</span>.stringify(event.state);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ä¸ºé“¾æ¥ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œé˜»æ­¢é¡µé¢è·³è½¬ï¼Œè§¦å‘pushState</span></div><div class="line"><span class="keyword">var</span> links = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'a'</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; links.length; i++) &#123;</div><div class="line">    links[i].onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        event.preventDefault();</div><div class="line">        <span class="keyword">var</span> route = event.target.getAttribute(<span class="string">'href'</span>);</div><div class="line">        history.pushState(&#123;<span class="attr">page</span>: route&#125;, route, route);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'current state'</span>, history.state)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>react-routerä¸ºæˆ‘ä»¬æä¾›é¢„åˆ¶çš„ï¼Œå¯ä»¥å®ç°åŠŸèƒ½çš„ç»„ä»¶ï¼Œä½¿ç”¨æ–¹æ³•å’Œreactç»„ä»¶ä¿æŒä¸€è‡´ï¼Œåªéœ€è¦æˆ‘ä»¬åœ¨åº”ç”¨çš„æ—¶å€™åŠ ä¸Šä¸€äº›JSXçš„æ ‡ç­¾ã€‚react-routerç›®å‰å·²å‡ºäº†4ä¸ªç‰ˆæœ¬ï¼Œè€Œä¸”ä¸åŒç‰ˆæœ¬ç›´æ¥å·®å¼‚ä¹Ÿæ¯”è¾ƒå¤§ã€‚ç›®å‰4.0ç‰ˆæœ¬ä¸­åŒ…å«ä¸‰ä¸ªä¸»è¦çš„åº“ï¼š</p>
<ul>
<li>react-router-dom(web)</li>
<li>react-router-native(rn)</li>
<li>react-router(core)</li>
</ul>
<p>react-router-domå’Œreact-router-nativeç›¸å½“äºåœ¨react-routerä¹‹ä¸Šåˆå°è£…äº†ä¸€å±‚ã€‚è®©æˆ‘ä»¬æ¥å…³æ³¨å¹¶ä¸”æ‰‹åŠ¨é…ç½®çš„éƒ¨åˆ†æ›´å°‘äº†ï¼Œä¸€èˆ¬å¦‚æœå¼€å‘webåº”ç”¨çš„è¯ï¼Œreact-router-domå°±è¶³å¤Ÿäº†ã€‚</p>
<p>æˆ‘ä»¬ä»react-router-domä¸­å¼•å…¥ä¸‰ä¸ªç»„ä»¶ï¼ŒBroswerRouterã€Routerã€Linkï¼Œè¿™ä¸ªç»„ä»¶éƒ½æ˜¯reactç»„ä»¶ã€‚é¦–å…ˆæŠŠBrowswerRouteræ”¾åˆ°æœ€å¤–å±‚ï¼Œè¿™æ˜¯ç»™æˆ‘ä»¬åº”ç”¨æ·»åŠ è·¯ç”±åŠŸèƒ½çš„å®¹å™¨ç»„ä»¶ï¼Œä¹‹ååœ¨æˆ‘ä»¬è§‰å¾—åˆé€‚çš„åœ°æ–¹æ·»åŠ linkç»„ä»¶ï¼Œlinkç»„ä»¶çš„toå±æ€§å°±æ˜¯å¯¹åº”è·¯ç”±çš„åœ°å€ï¼Œæœ€åä½¿ç”¨Routeræ¥æ·»åŠ æ­£å¼çš„è·¯ç”±ã€‚æ¯ä¸ªRouterçš„pathå±æ€§ä¹Ÿæ˜¯å¯¹åº”è·¯ç”±çš„åœ°å€ï¼Œç‚¹å‡»å¯¹åº”çš„linkï¼Œå°±ä¼šè·³è½¬åˆ°å¯¹åº”çš„è·¯ç”±ä¸­ã€‚Routerçš„componentå±æ€§ï¼Œå°±æ˜¯è·¯ç”±è·³è½¬è¿‡æ¥æ˜¾ç¤ºçš„ç»„ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; BrowserRouter, Route, Link &#125; = ReactRouterDOM</div><div class="line"></div><div class="line"><span class="keyword">const</span> BasicExample = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;BrowserRouter&gt;</div><div class="line">        &lt;div&gt;</div><div class="line">            &lt;ul&gt;</div><div class="line">                &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">exact</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line">                &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">exact</span> <span class="attr">to</span>=<span class="string">"/about"</span>&gt;</span>About<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line">                &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/topics"</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line">            &lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">            &lt;Route exact path="/</span><span class="string">" component=&#123;Home&#125;/&gt;</span></div><div class="line"><span class="string">            &lt;Route exact path="</span>/about<span class="string">" component=&#123;About&#125;/&gt;</span></div><div class="line"><span class="string">            &lt;Route path="</span>/topics<span class="string">" component=&#123;Topics&#125;/&gt;</span></div><div class="line"><span class="string">        &lt;/div&gt;</span></div><div class="line"><span class="string">    &lt;/BrowserRouter&gt;</span></div><div class="line"><span class="string">)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">const Home = () =&gt; (</span></div><div class="line"><span class="string">    &lt;div&gt;&lt;h2&gt;Home&lt;/h2&gt;&lt;/div&gt;</span></div><div class="line"><span class="string">)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">const About = () =&gt; (</span></div><div class="line"><span class="string">    &lt;div&gt;&lt;h2&gt;About&lt;/h2&gt;&lt;/div&gt;</span></div><div class="line"><span class="string">)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">const Topics = (&#123; match &#125;) =&gt; (</span></div><div class="line"><span class="string">    &lt;div&gt;&lt;h2&gt;Topics&lt;/h2&gt;&lt;/div&gt;</span></div><div class="line"><span class="string">)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">ReactDOM.render(&lt;BasicExample /&gt;, document.getElementById('root'))</span></div></pre></td></tr></table></figure>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="BrowserRouter"><a href="#BrowserRouter" class="headerlink" title="BrowserRouter"></a>BrowserRouter</h4><p>ä¸»è¦å®ç°é¡µé¢åŠŸèƒ½ä¸URLåŒæ­¥çš„åŠŸèƒ½ï¼Œæ–°ç‰ˆæœ¬çš„BrowserRouterå†…ç½®å¯¹æµè§ˆå™¨histroyçš„æ”¯æŒï¼Œä¸éœ€è¦æˆ‘ä»¬åšä»»ä½•çš„é…ç½®å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå¹¶ä¸”æ²¡æœ‰#å·ï¼Œä¹Ÿä¸ä¼šç”Ÿæˆéšæœºå­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; BrowserRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> Root = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;BrowserRouter&gt;</div><div class="line">        &lt;App/&gt;</div><div class="line">    &lt;<span class="regexp">/BrowserRouter&gt;</span></div><div class="line"><span class="regexp">)</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">const App = () =&gt; (</span></div><div class="line"><span class="regexp">    &lt;div&gt;&lt;h1&gt;Hello, react-route !&lt;/</span>h1&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">)</div><div class="line"></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Root</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'root'</span>))</div></pre></td></tr></table></figure>
<h4 id="Route"><a href="#Route" class="headerlink" title="Route"></a>Route</h4><p>Routeæ˜¯è·¯ç”±ç»„ä»¶ï¼Œä¸€èˆ¬æ¥å—2ä¸ªå‚æ•°ï¼Œpath å’Œ componentï¼Œç”¨æ¥åˆ¶å®šè·¯ç”±çš„URLå·²ç»æ‰€è¦æ¸²æŸ“çš„ç»„ä»¶ã€‚exact å±æ€§ï¼Œæ·»åŠ ååªä¼šåŒ¹é…åˆ°pathçš„æ ¹åœ°å€ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> BasicExample = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;BrowserRouter&gt;</div><div class="line">        &lt;div&gt;</div><div class="line">            &lt;ul&gt;</div><div class="line">                &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">exact</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line">                &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">exact</span> <span class="attr">to</span>=<span class="string">"/about"</span>&gt;</span>About<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line">                &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/topics"</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line">            &lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">            &lt;Route exact path="/</span><span class="string">" component=&#123;Home&#125;/&gt;</span></div><div class="line"><span class="string">            &lt;Route exact path="</span>/about<span class="string">" component=&#123;About&#125;/&gt;</span></div><div class="line"><span class="string">            &lt;Route path="</span>/topics<span class="string">" component=&#123;Topics&#125;/&gt;</span></div><div class="line"><span class="string">        &lt;/div&gt;</span></div><div class="line"><span class="string">    &lt;/BrowserRouter&gt;</span></div><div class="line"><span class="string">)</span></div></pre></td></tr></table></figure>
<h4 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h4><p>Linkæ˜¯æœ€åŸºæœ¬çš„å¯¼èˆªè¿æ¥ç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨toå‚æ•°ï¼ŒæŒ‡å‘æˆ‘ä»¬è¦ä½¿ç”¨çš„è·¯ç”±å³å¯ã€‚åœ¨æˆ‘ä»¬ä½¿ç”¨å½“ä¸­ï¼Œä¼šç»å¸¸ä¸ºæˆ‘ä»¬çš„å¯¼èˆªä½¿ç”¨ä¸åŒçš„æ ·å¼ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨çš„NavLinkï¼Œå¹¶åŠ ä¸Šå¯¼èˆªä½¿ç”¨çš„æ¿€æ´»å±æ€§activeStyleã€‚ç»„ä»¶æ¥æ”¶matchå¯¹è±¡åŒ…å«ä»¥ä¸‹å‡ é¡¹å±æ€§ï¼š</p>
<ul>
<li>params é¢„è®¾urlä¸­ä¼ é€’çš„å‚æ•°</li>
<li>isExact å½“å‰urlæ˜¯å¦ç»å¯¹åŒ¹é…æ­¤è·¯ç”±</li>
<li>path è·¯ç”±è®¾å®šçš„pathå€¼</li>
<li>url å½“å‰urlåœ°å€</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; BrowserRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> Root = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;BrowserRouter&gt;</div><div class="line">        &lt;App/&gt;</div><div class="line">    &lt;<span class="regexp">/BrowserRouter&gt;</span></div><div class="line"><span class="regexp">)</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">const App = () =&gt; (</span></div><div class="line"><span class="regexp">    &lt;div&gt;</span></div><div class="line"><span class="regexp">        &lt;ul&gt;</span></div><div class="line"><span class="regexp">            &lt;li&gt;&lt;NavLink activeStyle=&#123;&#123;fontWeight:'Bold'&#125;&#125;  to="/</span>repo/react&gt;Repo:react&lt;<span class="regexp">/NavLink&gt;&lt;/</span>li&gt;</div><div class="line">            &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">activeStyle</span>=<span class="string">&#123;&#123;fontWeight:</span>'<span class="attr">Bold</span>'&#125;&#125;  <span class="attr">to</span>=<span class="string">"/repo/vue&gt;</span></span></span>Repo:vue&lt;<span class="regexp">/NavLink&gt;&lt;/</span>li&gt;</div><div class="line">            &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">activeStyle</span>=<span class="string">&#123;&#123;fontWeight:</span>'<span class="attr">Bold</span>'&#125;&#125;  <span class="attr">to</span>=<span class="string">"/repo/angular&gt;</span></span></span>Repo:angular&lt;<span class="regexp">/NavLink&gt;&lt;/</span>li&gt;</div><div class="line">        &lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp">        </span></div><div class="line"><span class="regexp">        &lt;Route path='/</span>repo/:repoName?<span class="string">' component=&#123;Repo&#125; /&gt;</span></div><div class="line"><span class="string">    &lt;/div&gt;</span></div><div class="line"><span class="string">)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">const Repo = (&#123;match&#125;) =&gt; (</span></div><div class="line"><span class="string">    &lt;div&gt;&lt;p&gt;&#123;match.params.repoName&#125;&lt;/p&gt;&lt;/div&gt;</span></div><div class="line"><span class="string">)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">ReactDOM.render(&lt;Root/&gt;,document.getElementById('</span>root<span class="string">'))</span></div></pre></td></tr></table></figure>
<p>é™¤äº†é€šè¿‡ç»„ä»¶çš„å‚æ•°è·å–å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡withRouteræ–¹æ³•æ¥è·å–</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Title = <span class="function">(<span class="params">&#123;match&#125;</span>) =&gt;</span> (</div><div class="line">    &lt;h1&gt;&#123;match.params.repo&#125;&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">)</span></div><div class="line"><span class="regexp">Title = withRouter(Title)</span></div></pre></td></tr></table></figure>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="cssæ ·å¼ç¼–å†™çš„æ–¹æ³•"><a href="#cssæ ·å¼ç¼–å†™çš„æ–¹æ³•" class="headerlink" title="cssæ ·å¼ç¼–å†™çš„æ–¹æ³•"></a>cssæ ·å¼ç¼–å†™çš„æ–¹æ³•</h3><ul>
<li>css in js <a href="https://developer.mozilla.org/en-US/docs/web/css/css_properties_reference" target="_blank" rel="external">(cssåç§°)</a></li>
<li>å¤–éƒ¨å¼•ç”¨cssï¼Œç„¶åä¸ºç»„ä»¶å®šä¹‰å¯¹åº”çš„classNameå±æ€§ã€‚</li>
</ul>
<p>css in js,æ˜¯ç”±facebookæå‡ºçš„åœ¨ç”±Reactå¼€å‘çš„èƒŒæ™¯ä¸‹ã€‚css in jsï¼Œå…è®¸æˆ‘ä»¬åœ¨å˜é‡å½“ä¸­å®šä¹‰æ ·å¼ï¼Œé€šè¿‡å®šä¹‰å†…è”æ ·å¼ç›´æ¥å°†æ¯ä¸ªç»„ä»¶çš„æ ·å¼å†™åœ¨æ¯ä¸ªç»„ä»¶çš„jså½“ä¸­ã€‚é€šè¿‡åˆ©ç”¨jsè¯­è¨€æœ¬èº«çš„ç‰¹æ€§ï¼Œä¸å¿…æ‹…å¿ƒæ ·å¼çš„ä½œç”¨åŸŸæˆ–è€…æ˜¯å¤ç”¨æ€§ä¹‹ç±»çš„é—®é¢˜ã€‚åœ¨ä¼ ç»Ÿçš„webå¼€å‘è®¤ä¸ºåº”è¯¥å°½é‡ä½¿ç”¨å¤–è”æ ·å¼ï¼Œä¸é¡µé¢ç»“æ„åˆ†ç¦»ã€‚ä½†ç»„ä»¶åŒ–çš„æ€æƒ³ä¸­ï¼ŒåŒä¸€ä¸ªç»„ä»¶åº”è¯¥åœ¨å†…éƒ¨å®šä¹‰é€»è¾‘ï¼ç»“æ„ï¼æ ·å¼ã€‚åˆ†è€Œæ²»ä¹‹ï¼Œè¿›è¿‘ç»´æŠ¤ï¼Œç‹¬ç«‹æ–‡ä»¶ï¼Œå¤–éƒ¨å¼•ç”¨ã€‚</p>
<h4 id="Modules-Sass-PostCSS-åœ¨Reacté¡¹ç›®ä¸­çš„åº”ç”¨"><a href="#Modules-Sass-PostCSS-åœ¨Reacté¡¹ç›®ä¸­çš„åº”ç”¨" class="headerlink" title="Modules/Sass/PostCSS åœ¨Reacté¡¹ç›®ä¸­çš„åº”ç”¨"></a>Modules/Sass/PostCSS åœ¨Reacté¡¹ç›®ä¸­çš„åº”ç”¨</h4><h4 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h4><p>create-react-appå·²ç»æŠŠæˆ‘ä»¬æŠŠæ‰€æœ‰é…ç½®éƒ½å°è£…å·ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›æ”¹å˜çš„è¯ï¼Œå°±éœ€è¦è·å–é…ç½®æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ä¸­<code>run eject</code>,åœ¨ç›®å½•ä¸‹ç”Ÿæˆconfigæ–‡ä»¶ï¼Œwebpack.config.dev.jså’Œwebpack.config.prod.jsã€‚</p>
<p>æˆ‘ä»¬ç”¨å‘½ä»¤è¡Œåˆ›å»ºçš„reacté¡¹ç›®å½“ä¸­ï¼Œé»˜è®¤å·²ç»åŒ…å«äº†ä½¿ç”¨CSS Modulesçš„æ‰€æœ‰ä¾èµ–ï¼Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹é…ç½®æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    loader: <span class="built_in">require</span>.resolve(<span class="string">'css-loader'</span>),</div><div class="line">    options: &#123;</div><div class="line">        importLoaders: <span class="number">1</span>,</div><div class="line">        modules:<span class="literal">true</span>,</div><div class="line">        localIdentName: <span class="string">'[path][name]__[local]--[hash:base64:5]'</span></div><div class="line">    &#125;,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åå°±å¯ä»¥é€šè¿‡importæ¥å¼•å…¥æ ·å¼äº†ï¼Œå°±å¯ä»¥åœ¨classNameå¯¹åº”çš„ç±»åä¸‹ä½¿ç”¨äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'./App.css'</span></div></pre></td></tr></table></figure>
<h4 id="sass"><a href="#sass" class="headerlink" title="sass"></a>sass</h4><p>å¦‚æœåƒä½¿ç”¨sassï¼Œå°±è¦æ·»åŠ å¯¹åº”çš„sassåŠ è½½å™¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install sass-loader node-sass --save-dev</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    test:<span class="regexp">/\.scss$/</span>,</div><div class="line">    include:paths.appSrc,</div><div class="line">    loaders:[</div><div class="line">        <span class="built_in">require</span>.resolve(<span class="string">'style-loader'</span>),</div><div class="line">        <span class="built_in">require</span>.resolve(<span class="string">'css-loader'</span>),</div><div class="line">        <span class="built_in">require</span>.resolve(<span class="string">'sass-loader'</span>),</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="postcss"><a href="#postcss" class="headerlink" title="postcss"></a>postcss</h4><p>æ˜¯ä¸€ä¸ªåŠ è½½cssæ’ä»¶çš„å¹³å°ï¼Œæ¯”èµ·ä¸€äº›é¢„å…ˆå®šåˆ¶å¥½çš„åŠ è½½å™¨ï¼Œpostcssæ›´åŠ çš„çµæ´»ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">npm install autoprefixer postcss-initial postcss-import postcss-mixins postcss-nested postcss-simple-vars postcss-math postcss-color-function --save-dev</div><div class="line">é…ç½® postcss.config.js</div><div class="line">æ–°å»ºsrcæ–‡ä»¶å¤¹ï¼Œé…ç½® variables.js å’Œ mixins.js</div><div class="line">åœ¨ webpack.config ä¸­å¼•å…¥ postcss é…ç½®</div></pre></td></tr></table></figure>
<p><strong>webpack.config</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    loader: <span class="built_in">require</span>.resolve(<span class="string">'postcss-loader'</span>),</div><div class="line">    options: &#123;</div><div class="line">        config: &#123;</div><div class="line">            path:<span class="string">'./config/postcss.config.js'</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>postcss.config.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  plugins: &#123;</div><div class="line">    <span class="comment">/* autoprefix for different browser vendors */</span></div><div class="line">    <span class="string">'autoprefixer'</span>: &#123;&#125;,</div><div class="line">    <span class="comment">/* reset inherited rules */</span></div><div class="line">    <span class="string">'postcss-initial'</span>:&#123;</div><div class="line">      reset: <span class="string">'inherited'</span> <span class="comment">// reset only inherited rules</span></div><div class="line">    &#125;,</div><div class="line">    <span class="comment">/* enable css @imports like Sass/Less */</span></div><div class="line">    <span class="string">'postcss-import'</span>: &#123;&#125;,</div><div class="line">    <span class="comment">/* enable mixins like Sass/Less */</span></div><div class="line">    <span class="string">'postcss-mixins'</span>:&#123;</div><div class="line">      mixins: <span class="built_in">require</span>(<span class="string">'./src/mixins'</span>)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">/* enable nested css selectors like Sass/Less */</span></div><div class="line">    <span class="string">'postcss-nested'</span>:&#123;&#125;,</div><div class="line">    <span class="comment">/* require global variables */</span></div><div class="line">    <span class="string">'postcss-simple-vars'</span>:&#123;</div><div class="line">      variables: <span class="function"><span class="keyword">function</span> <span class="title">variables</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">'./src/variables'</span>)</div><div class="line">      &#125;,</div><div class="line">      unknown: <span class="function"><span class="keyword">function</span> <span class="title">unknown</span>(<span class="params">node, name, result</span>) </span>&#123;</div><div class="line">        node.warn(result, <span class="string">'Unknown variable '</span> + name)</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">/* PostCSS plugin for making calculations with math.js  */</span></div><div class="line">    <span class="string">'postcss-math'</span>:&#123;&#125;,</div><div class="line">    <span class="comment">/* transform W3C CSS color function to more compatible CSS. */</span></div><div class="line">    <span class="string">'postcss-color-function'</span>:&#123;&#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>mixins.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// src/mixins.js</span></div><div class="line"><span class="keyword">var</span> globalMixins = &#123;</div><div class="line">  <span class="comment">/* noSelect is a static mixin  */</span></div><div class="line">  noSelect: &#123;</div><div class="line">    <span class="string">'-webkit-touch-callout'</span>: <span class="string">'none'</span>,</div><div class="line">    <span class="string">'-webkit-user-select'</span>: <span class="string">'none'</span>,</div><div class="line">    <span class="string">'-khtml-user-select'</span>: <span class="string">'none'</span>,</div><div class="line">    <span class="string">'-moz-user-select'</span>: <span class="string">'none'</span>,</div><div class="line">    <span class="string">'-ms-user-select'</span>: <span class="string">'none'</span>,</div><div class="line">    <span class="string">'user-select'</span>: <span class="string">'none'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">/* OpenSans is a dynamic mixin  */</span></div><div class="line">  OpenSans: <span class="function"><span class="keyword">function</span> (<span class="params">obj, value</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="string">'font-family'</span>: <span class="string">'Open Sans, sans-serif'</span>,</div><div class="line">      <span class="string">'font-style'</span>: <span class="string">'normal'</span>,</div><div class="line">      <span class="string">'font-size'</span>: value,</div><div class="line">      <span class="string">'font-weight'</span>: <span class="number">200</span>,</div><div class="line">      <span class="string">'-webkit-font-smoothing'</span>: <span class="string">'antialiased'</span>,</div><div class="line">      <span class="string">'-moz-osx-font-smoothing'</span>: <span class="string">'grayscale'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">module</span>.exports = globalMixins</div></pre></td></tr></table></figure>
<p>variables.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> globalVariable = &#123;</div><div class="line">  primary: <span class="string">'blue'</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">module</span>.exports = globalVariable</div></pre></td></tr></table></figure>
<p><strong>App.css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.App-intro</span>&#123;</div><div class="line">    <span class="attribute">color</span>:$primary;</div><div class="line">    @mixin noSelect;</div><div class="line">    @<span class="keyword">mixin</span> OpenSans <span class="number">30px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å®æˆ˜TodoList"><a href="#å®æˆ˜TodoList" class="headerlink" title="å®æˆ˜TodoList"></a>å®æˆ˜TodoList</h2><h3 id="å¼€å‘å‰å‡†å¤‡"><a href="#å¼€å‘å‰å‡†å¤‡" class="headerlink" title="å¼€å‘å‰å‡†å¤‡"></a>å¼€å‘å‰å‡†å¤‡</h3><p>ç¯å¢ƒ</p>
<ul>
<li><a href="https://nodejs.org/zh-cn/" target="_blank" rel="external">node</a></li>
<li><a href="https://github.com/facebookincubator/create-react-app" target="_blank" rel="external">create-react-app</a></li>
</ul>
<p>åˆå§‹åŒ–é¡¹ç›®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> Desktop </div><div class="line">create-react-app todo</div></pre></td></tr></table></figure>
<p>åˆ é™¤srcç›®å½•ä¸Šçš„æ‰€æœ‰æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> src  &amp;&amp; rm -rf *</div></pre></td></tr></table></figure>
<p>åˆ›å»ºComponents åŠ Containers æ–‡ä»¶å¤¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir Components</div><div class="line">mkdir Containers</div></pre></td></tr></table></figure>
<p>åœ¨Componentsä¸Šåˆ›å»º TodoApp.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> Components &amp;&amp; touch TodoApp.js</div><div class="line">vim TodoApp.js</div></pre></td></tr></table></figure>
<p><strong>TodoApp.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div&gt;Hello, React!<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> TodoApp;</div></pre></td></tr></table></figure>
<p>åœ¨srcç›®å½•ä¸‹åˆ›å»ºindex.jså¹¶å¼•ç”¨TodoApp.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> .. &amp;&amp; touch index.js</div><div class="line">vim index.js</div></pre></td></tr></table></figure>
<p><strong>index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div><div class="line"><span class="keyword">import</span> TodoApp <span class="keyword">from</span> <span class="string">'./Components/TodoApp'</span></div><div class="line"></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">TodoApp</span> /&gt;</span>, document.getElementById('root'));</span></div></pre></td></tr></table></figure>
<h3 id="ç»„ä»¶å¼€å‘"><a href="#ç»„ä»¶å¼€å‘" class="headerlink" title="ç»„ä»¶å¼€å‘"></a>ç»„ä»¶å¼€å‘</h3><p>åœ¨ğŸ“Componentä¸­åˆ›å»ºAddTodo.jsï¼ŒæŠŠæ ‡é¢˜å’Œè¾“å…¥æ¡†éƒ½æ”¾åœ¨å…¶ä¸­ã€‚</p>
<p><strong>AddTodo.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> AddTodo = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;header&gt;</div><div class="line">        &lt;h1&gt;Todos&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">        &lt;input placeholder="æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ" autoFocus /</span>&gt;</div><div class="line">    &lt;<span class="regexp">/header&gt;</span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default AddTodo;</span></div></pre></td></tr></table></figure>
<p>åœ¨ğŸ“Componentä¸­åˆ›å»ºTodoList.jsï¼Œåˆ—è¡¨ç»„ä»¶ã€‚æ¶‰åŠåˆ°Reactå½“ä¸­çš„åˆ—è¡¨æ¸²æŸ“ï¼Œæˆ‘ä»¬æŠŠåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è®¾ä¸ºTodo.jsç»„ä»¶ï¼Œç„¶åTodoListæ¥æ”¶propsï¼Œä½¿ç”¨mapæ–¹æ³•æ¸²æŸ“å‡ºæ¯ä¸€é¡¹Todoã€‚</p>
<p><strong>TodoList.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> Todo <span class="keyword">from</span> <span class="string">'./Todo'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> TodoList = <span class="function">(<span class="params">&#123; todos &#125;</span>) =&gt;</span> (</div><div class="line">    &lt;ul&gt;</div><div class="line">        &#123;todos.map(<span class="function">(<span class="params">todo</span>) =&gt;</span> (</div><div class="line">            &lt;Todo key=&#123;todo.id&#125; content=&#123;todo.content&#125; /&gt;</div><div class="line">        ))&#125;</div><div class="line">    &lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default TodoList;</span></div></pre></td></tr></table></figure>
<p><strong>Todo.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Todo = <span class="function">(<span class="params">&#123; content &#125;</span>) =&gt;</span> (</div><div class="line">    &lt;li&gt;</div><div class="line">        &lt;div&gt;</div><div class="line">            &lt;input type=<span class="string">"checkbox"</span> /&gt;</div><div class="line">            &lt;label href=<span class="string">"/#"</span>&gt;&#123;content&#125;&lt;<span class="regexp">/label&gt;</span></div><div class="line"><span class="regexp">        &lt;/</span>div&gt;</div><div class="line">    &lt;<span class="regexp">/li&gt; </span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default Todo;</span></div></pre></td></tr></table></figure>
<p>åœ¨ğŸ“Componentä¸­åˆ›å»ºFooter.jsï¼Œå¯¼èˆªç»„ä»¶ã€‚åŒ…å«å…¨éƒ¨ã€ä»£åŠã€å·²å®Œæˆï¼Œå¹¶ä¸”æŠŠå½“ä¸­çš„æ¯ä¸€é¡¹å°è£…ä¸ºLinkç»„ä»¶ã€‚ç”±äºè¿™ä¸‰é¡¹çš„å†…å®¹éƒ½æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥é‡å¤å¼•ç”¨ä¸‰æ¬¡Linkç»„ä»¶å³å¯ã€‚</p>
<p><strong>Footer.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'./Link'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Footer = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;footer&gt;</div><div class="line">        &lt;ul&gt;</div><div class="line">            &lt;Link filter=<span class="string">"all"</span>&gt;å…¨éƒ¨&lt;<span class="regexp">/Link&gt;</span></div><div class="line"><span class="regexp">            &lt;Link filter="active"&gt;å¾…åŠ&lt;/</span>Link&gt;</div><div class="line">            &lt;Link filter=<span class="string">"completed"</span>&gt;å·²å®Œæˆ&lt;<span class="regexp">/Link&gt;</span></div><div class="line"><span class="regexp">        &lt;/u</span>l&gt;</div><div class="line">    &lt;<span class="regexp">/footer&gt;</span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default Footer;</span></div></pre></td></tr></table></figure>
<p><strong>Link.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Link = <span class="function">(<span class="params">&#123; children &#125;</span>) =&gt;</span> (</div><div class="line">    &lt;li&gt;</div><div class="line">        &lt;a href=<span class="string">"/#"</span>&gt;&#123;children&#125;&lt;<span class="regexp">/a&gt;</span></div><div class="line"><span class="regexp">    &lt;/</span>li&gt;</div><div class="line">);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Link;</div></pre></td></tr></table></figure>
<p>åœ¨srcç›®å½•ä¸‹åˆ›å»ºstore.jsï¼Œç”¨æ¥æ¨¡æ‹Ÿä¸´æ—¶æ•°æ®</p>
<p><strong>store.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> todos = [</div><div class="line">    &#123; </div><div class="line">        id: <span class="number">1</span>,</div><div class="line">        content: <span class="string">"å­¦ä¹  React"</span></div><div class="line">    &#125;,</div><div class="line">    &#123; </div><div class="line">        id: <span class="number">2</span>,</div><div class="line">        content: <span class="string">"å­¦ä¹  Redux"</span></div><div class="line">    &#125;,</div><div class="line">    &#123; </div><div class="line">        id: <span class="number">3</span>,</div><div class="line">        content: <span class="string">"å­¦ä¹  react-router"</span></div><div class="line">    &#125;,</div><div class="line">];</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> todos;</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹åº”ç”¨ä¸»æ–‡ä»¶TodoApp.jsï¼Œå¼•å…¥ç¼–å†™çš„ä¸‰ä¸ªæ¨¡å—ï¼Œä»¥åŠstoreæ•°æ®ã€‚æŠŠstoreæ•°æ®ä¼ å…¥TodoListä¸­ã€‚</p>
<p><strong>TodoApp.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React    <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> AddTodo  <span class="keyword">from</span> <span class="string">'./AddTodo'</span>;</div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'./TodoList'</span>;</div><div class="line"><span class="keyword">import</span> Footer   <span class="keyword">from</span> <span class="string">'./Footer'</span>;</div><div class="line"><span class="keyword">import</span> todos    <span class="keyword">from</span> <span class="string">'../store.js'</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> TodoApp = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;section&gt;</div><div class="line">        &lt;AddTodo/&gt;</div><div class="line">        &lt;TodoList todos=&#123;todos&#125;/&gt;</div><div class="line">        &lt;Footer/&gt;</div><div class="line">    &lt;<span class="regexp">/section&gt;</span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default TodoApp;</span></div></pre></td></tr></table></figure>
<h3 id="æ ·å¼"><a href="#æ ·å¼" class="headerlink" title="æ ·å¼"></a>æ ·å¼</h3><p>å€Ÿç”¨ <a href="https://github.com/tastejs/todomvc-app-css" target="_blank" rel="external">todomvc-app-css</a> æ¥è¿›è¡Œæ ·å¼å¡«å……ï¼Œç„¶åå¯¹åº”çš„æ·»åŠ classNameã€‚</p>
<blockquote>
<p>æ­¤å¤„æˆ‘ä»¬ä»…ä»…æ˜¯ä¸ºäº†é¡µé¢çš„ç¾è§‚ï¼Œå¦‚æœå¯¹æ ·å¼æ²¡æœ‰è¦æ±‚ï¼Œåªå…³æ³¨åŠŸèƒ½ï¼Œå¯ä»¥è·³è¿‡ã€‚</p>
</blockquote>
<p>é€šè¿‡npmå®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install todomvc-app-css --save</div></pre></td></tr></table></figure>
<p>ç„¶åæ›´å…· <a href="https://github.com/tastejs/todomvc-app-template/blob/master/index.html" target="_blank" rel="external">todomvc-html</a>é‡Œä¸ºæˆ‘ä»¬çš„Todoåº”ç”¨å¯¹åº”æ·»åŠ ä¸ŠclassNameã€‚</p>
<p><strong>TodoApp.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> TodoApp = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;section className=<span class="string">"todoapp"</span> &gt;</div><div class="line">        &lt;AddTodo/&gt;</div><div class="line">        &lt;TodoList todos=&#123;todos&#125;/&gt;</div><div class="line">        &lt;Footer/&gt;</div><div class="line">    &lt;<span class="regexp">/section&gt;</span></div><div class="line"><span class="regexp">);</span></div></pre></td></tr></table></figure>
<p><strong>AddTodo.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> AddTodo = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;header className=<span class="string">"header"</span>&gt;</div><div class="line">        &lt;h1&gt;Todos&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">        &lt;input className="new-todo" placeholder="æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ" autoFocus /</span>&gt;</div><div class="line">    &lt;<span class="regexp">/header&gt;</span></div><div class="line"><span class="regexp">);</span></div></pre></td></tr></table></figure>
<p><strong>TodoList.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> TodoList = <span class="function">(<span class="params">&#123; todos &#125;</span>) =&gt;</span> (</div><div class="line">    &lt;ul className=<span class="string">"todo-list"</span>&gt;</div><div class="line">        &#123;todos.map(<span class="function">(<span class="params">todo</span>) =&gt;</span> (</div><div class="line">            &lt;Todo key=&#123;todo.id&#125; content=&#123;todo.content&#125; /&gt;</div><div class="line">        ))&#125;</div><div class="line">    &lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp">);</span></div></pre></td></tr></table></figure>
<p><strong>Todo.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Todo = <span class="function">(<span class="params">&#123; content &#125;</span>) =&gt;</span> (</div><div class="line">    &lt;li&gt;</div><div class="line">        &lt;div className=<span class="string">"view"</span>&gt;</div><div class="line">            &lt;input className=<span class="string">"toggle"</span> type=<span class="string">"checkbox"</span> /&gt;</div><div class="line">            &lt;label href=<span class="string">"/#"</span>&gt;&#123;content&#125;&lt;<span class="regexp">/label&gt;</span></div><div class="line"><span class="regexp">        &lt;/</span>div&gt;</div><div class="line">    &lt;<span class="regexp">/li&gt; </span></div><div class="line"><span class="regexp">);</span></div></pre></td></tr></table></figure>
<p><strong>Foot.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Footer = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;footer className=<span class="string">"footer"</span>&gt;</div><div class="line">        &lt;ul className=<span class="string">"filters"</span>&gt;</div><div class="line">            &lt;Link filter=<span class="string">"all"</span>&gt;</div><div class="line">                å…¨éƒ¨</div><div class="line">            &lt;<span class="regexp">/Link&gt;</span></div><div class="line"><span class="regexp">            &lt;Link filter="active"&gt;</span></div><div class="line"><span class="regexp">                å¾…åŠ</span></div><div class="line"><span class="regexp">            &lt;/</span>Link&gt;</div><div class="line">            &lt;Link filter=<span class="string">"completed"</span>&gt;</div><div class="line">                å·²å®Œæˆ</div><div class="line">            &lt;<span class="regexp">/Link&gt;</span></div><div class="line"><span class="regexp">        &lt;/u</span>l&gt;</div><div class="line">    &lt;<span class="regexp">/footer&gt;</span></div><div class="line"><span class="regexp">);</span></div></pre></td></tr></table></figure>
<p>åœ¨TodoApp.jsä¸­å¼•å…¥todomvc-app-cssæ–‡ä»¶</p>
<p><strong>TodoApp.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'todomvc-app-css/index.css'</span>;</div></pre></td></tr></table></figure>
<h3 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h3><p>é¦–å…ˆä¸ºé¡¹ç›®å®‰ç½®reduxåŠreact-reduxï¼Œæ–°å»ºaction.jsã€reducer.jsã€store.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install redux react-redux --save</div></pre></td></tr></table></figure>
<p><strong>action.js</strong></p>
<p>actionæ˜¯ä¸€ä¸ªå…·æœ‰typeå±æ€§çš„jså¯¹è±¡ã€‚æˆ‘ä»¬ä¸ºå…¶æ·»åŠ ä¸€ä¸ªaddTodoåŠŸèƒ½ï¼Œæ›´å…·ç”¨æˆ·çš„æ–‡æœ¬è¾“å…¥ï¼Œæ·»åŠ ä¸€æ¡å¾…åŠäº‹é¡¹ã€‚ç”±äºå¾…åŠäº‹é¡¹æ˜¯åœ¨reactåˆ—è¡¨ä¸­æ¸²æŸ“ï¼Œæ‰€ä»¥æ¯ä¸€é¡¹å†…å®¹éƒ½éœ€è¦ä¸€ä¸ªæ•°æ®ä½œä¸ºkeyå€¼ï¼Œå®šä¹‰ä¸ºtodoId å¤„å§‹ä¸º 4ï¼ˆé»˜è®¤æœ‰3æ¡ï¼‰ã€‚toggleTodoæ–¹æ³•ä¸ºæ ‡è®°å¾…åŠäº‹é¡¹ï¼Œæˆ‘ä»¬å¿…é¡»è¦ä¼ é€’è¿›idå³å¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> todoId = <span class="number">4</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> addTodo = <span class="function">(<span class="params">content</span>) =&gt;</span> (&#123;</div><div class="line">    type: <span class="string">'ADD_TODO'</span>,</div><div class="line">    content,</div><div class="line">    id: todoId++</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> toggleTodo = <span class="function">(<span class="params">id</span>) =&gt;</span> (&#123;</div><div class="line">    type: <span class="string">'TOGGLE_TODO'</span>,</div><div class="line">    id</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong>reducer.js</strong></p>
<p>reduceræ˜¯ä¸€ä¸ªswitchç»“æ„çš„å‡½æ•°ï¼Œæ¥æ”¶stateå’Œactionä½œä¸ºå‚æ•°ï¼Œåˆ¤æ–­ä¸åŒçš„action.typeçš„ç±»å‹ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„stateã€‚å½“action.type === â€˜ADD_TODOâ€™çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ºç”¨æˆ·æ–°å¢ä¸€æ¡ä»£åŠäº‹é¡¹ï¼Œç”¨å±•å¼€æ“ä½œç¬¦å·çš„æ–¹æ³•(â€¦state)ï¼Œå¯ä»¥ä¿è¯æˆ‘ä»¬è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„stateæ•°æ®ã€‚å½“action === â€˜TOGGLE_TODOâ€™ æ—¶ï¼Œå½“æŸä¸€ä¸ªå¾…åŠäº‹é¡¹åˆ‡æ¢æ—¶ï¼Œå°†å®ƒåˆ‡æ¢ä¸ºå·²å®Œæˆæˆ–è€…æœªå®Œæˆçš„çŠ¶æ€ï¼Œç„¶åè¿”å›ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> todo = <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'ADD_TODO'</span>:</div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        id: action.id,</div><div class="line">        content: action.content,</div><div class="line">        completed: <span class="literal">false</span></div><div class="line">      &#125;;</div><div class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_TODO'</span>:</div><div class="line">      <span class="keyword">if</span> (state.id !== action.id) &#123;</div><div class="line">        <span class="keyword">return</span> state;</div><div class="line">      &#125;;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        ...state,</div><div class="line">        completed: !state.completed</div><div class="line">      &#125;;</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">      <span class="keyword">return</span> state;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'ADD_TODO'</span>:</div><div class="line">            <span class="keyword">return</span> [</div><div class="line">                ...state,</div><div class="line">                todo(<span class="literal">undefined</span>, action)</div><div class="line">            ];</div><div class="line">        <span class="keyword">case</span> <span class="string">'TOGGLE_TODO'</span>:</div><div class="line">            <span class="keyword">return</span> state.map(<span class="function"><span class="params">t</span> =&gt;</span> &#123;</div><div class="line">                <span class="keyword">return</span> todo(t, action)</div><div class="line">            &#125;)</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><strong>store</strong></p>
<p>å¼•ç”¨reduxè°ƒç”¨createStoreç”Ÿæˆstroeã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; todos &#125; <span class="keyword">from</span> <span class="string">'./reducer'</span>;</div><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> defaultTodos = [</div><div class="line">    &#123; </div><div class="line">        id: <span class="number">1</span>,</div><div class="line">        content: <span class="string">"å­¦ä¹  React"</span></div><div class="line">    &#125;,</div><div class="line">    &#123; </div><div class="line">        id: <span class="number">2</span>,</div><div class="line">        content: <span class="string">"å­¦ä¹  Redux"</span></div><div class="line">    &#125;,</div><div class="line">    &#123; </div><div class="line">        id: <span class="number">3</span>,</div><div class="line">        content: <span class="string">"å­¦ä¹  react-router"</span></div><div class="line">    &#125;,</div><div class="line">];</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = createStore(todos, defaultTodos);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</div></pre></td></tr></table></figure>
<p>ä¸ºäº†åŒºåˆ†é€»è¾‘ï¼Œæ–°å»ºRoot.jsã€‚ä½¿ç”¨react-reduxæŠŠreactå’Œreduxè¿æ¥åœ¨ä¸€èµ·ã€‚</p>
<p>Root.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> TodoApp <span class="keyword">from</span> <span class="string">'./TodoApp'</span>;</div><div class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Root = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">       &lt;Provider store=&#123;store&#125;&gt;</div><div class="line">           &lt;TodoApp /&gt;</div><div class="line">        &lt;<span class="regexp">/Provider&gt;</span></div><div class="line"><span class="regexp">    );</span></div><div class="line"><span class="regexp">&#125;;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default Root;</span></div></pre></td></tr></table></figure>
<p>ä¹‹å‰ç¼–å†™çš„ç»„ä»¶éƒ½æ˜¯å±•ç¤ºç»„ä»¶ï¼Œåªè´Ÿè´£é¡µé¢çš„ç»“æ„ï¼Œè¦è·å–ç”¨æˆ·æ•°æ®éœ€è¦ä½¿ç”¨çš„å®¹å™¨ç»„ä»¶ã€‚åœ¨Containersä¸­åˆ›å»ºä¸€ä¸ªVisibleTodoList.jsï¼Œä½œä¸ºTodoListçš„å®¹å™¨ç»„ä»¶ã€‚é™¤äº†å¼•å…¥TodoListä¹‹å¤–ï¼Œè¿˜æœ‰å¼•å…¥react-reduxä¸­çš„connectæ–¹æ³•ï¼Œconnectçš„ä½œç”¨å°±æ˜¯å°†storeå½“ä¸­çš„æ•°æ®å’Œæ–¹æ³•ï¼Œæ˜ å°„åˆ°æˆ‘ä»¬ç»„ä»¶çš„propså½“ä¸­ã€‚connectæ–¹æ³•æ¥æ”¶2ä¸ªå‡½æ•°ï¼ŒmapStateToPropså’ŒmapDispatchToPropsã€‚åˆ†åˆ«ç”¨æ¥å¤„ç†storeå½“ä¸­çš„stateæ•°æ®å’Œdispatchæ–¹æ³•ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç®€å•çš„mapStateToPropsæ–¹æ³•ï¼Œå°†stateæ•°æ®æ˜ å°„åˆ°todoså½“ä¸­ã€‚</p>
<p><strong>VisibleTodoList.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../Components/TodoList'</span>;</div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../action'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, ownProps</span>) =&gt;</span> (&#123;</div><div class="line">    todos: state</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> (&#123;</div><div class="line">    onTodoClick: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">        dispatch(toggleTodo(id));</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">    mapStateToProps,</div><div class="line">    mapDispatchToProps</div><div class="line">)(TodoList);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList;</div></pre></td></tr></table></figure>
<p>é€šè¿‡<strong>todoList</strong>ä¸ºæ¯ä¸ªtodoç»„ä»¶ä¼ å…¥onClickæ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> Todo <span class="keyword">from</span> <span class="string">'./Todo'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> TodoList = <span class="function">(<span class="params">&#123; todos, onTodoClick &#125;</span>) =&gt;</span> (</div><div class="line">    &lt;ul className=<span class="string">"todo-list"</span>&gt;</div><div class="line">        &#123;todos.map(<span class="function">(<span class="params">todo</span>) =&gt;</span> (</div><div class="line">            &lt;Todo key=&#123;todo.id&#125; onClick=&#123;() =&gt; onTodoClick(todo.id)&#125; &#123;...todo&#125; content=&#123;todo.content&#125; /&gt;</div><div class="line">        ))&#125;</div><div class="line">    &lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default TodoList;</span></div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨<strong>todo</strong>ç»„ä»¶ä¸­ï¼ŒæŠŠäº‹ä»¶ç»‘å®šåœ¨checkboxä¸Šã€‚æˆ‘ä»¬ä¹Ÿéœ€è¦ç•Œé¢çš„æ”¹å˜æ¥è§‚å¯Ÿæ•°æ®çš„åˆ‡æ¢ï¼Œå› æ­¤æˆ‘ä»¬æŠŠcheckboxçš„é€‰ä¸­çŠ¶æ€å’Œcompletedçš„å±æ€§ç»‘å®šåœ¨ä¸€èµ·ï¼ŒåŒæ—¶ä¸ºtodoç»„ä»¶åŠ ä¸Šcssæ•ˆæœã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Todo = <span class="function">(<span class="params">&#123; content, onClick, completed &#125;</span>) =&gt;</span> (</div><div class="line">    &lt;li style=&#123;&#123;</div><div class="line">        textDecoration:</div><div class="line">            completed ?</div><div class="line">            <span class="string">'line-through'</span> :</div><div class="line">            <span class="string">'none'</span>,</div><div class="line">        color:</div><div class="line">            completed ?</div><div class="line">            <span class="string">'#d9d9d9'</span> :</div><div class="line">            <span class="string">'#4d4d4d'</span></div><div class="line">        &#125;</div><div class="line">    &#125;&gt;</div><div class="line">        &lt;div className=<span class="string">"view"</span>&gt;</div><div class="line">            &lt;input onChange=&#123;onClick&#125; className=<span class="string">"toggle"</span> type=<span class="string">"checkbox"</span> checked=&#123;completed ? <span class="string">'checked'</span> : <span class="string">''</span>&#125; /&gt;</div><div class="line">            &lt;label href=<span class="string">"/#"</span>&gt;&#123;content&#125;&lt;<span class="regexp">/label&gt;</span></div><div class="line"><span class="regexp">        &lt;/</span>div&gt;</div><div class="line">    &lt;<span class="regexp">/li&gt; </span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default Todo;</span></div></pre></td></tr></table></figure>
<p>ä¸ºAddTodoæ·»åŠ å¾…åŠäº‹é¡¹çš„åŠŸèƒ½ï¼ŒæŠŠAddTodoç§»åŠ¨åˆ°Containerså½“ä¸­ï¼Œå¼•å…¥react-reduxä¸­çš„connectæ–¹æ³•ã€‚å¦‚æœæˆ‘ä»¬ä¸ä¸ºconnectä¼ é€’ä»»ä½•å‚æ•°ï¼Œconnectä¼šæŠŠstateå’Œdispatchä¼ é€’åˆ°æˆ‘ä»¬çš„ç»„ä»¶å½“ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½ä»propsä¸­è·å–dispatchæ–¹æ³•ã€‚ä¸ºinputç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå½“æˆ‘ä»¬æŒ‰ä¸‹å›è½¦çš„æ—¶å€™ï¼Œè§¦å‘dispatchæ–¹æ³•ä¼ å…¥ADD_TODOåŠ¨ä½œï¼ˆä»actionä¸­å¼•å…¥ADD_TODOæ–¹æ³•ï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨éå—æ§ç»„ä»¶çš„æ–¹æ³•æ¥è·å–inputçš„è¾“å…¥å€¼ï¼Œæ‰€ä»¥éœ€è¦åœ¨ç»„ä»¶ä¸­æ·»åŠ refçš„å±æ€§æ¥è·å–åˆ°inputå…ƒç´ ï¼ŒæŠŠå®ƒæš‚å­˜åˆ°æˆ‘ä»¬å£°æ˜çš„inputå˜é‡å½“ä¸­ã€‚</p>
<p><strong>AddTodo.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> &#123; addTodo &#125; <span class="keyword">from</span> <span class="string">'../action'</span>;</div><div class="line"></div><div class="line"><span class="keyword">let</span> AddTodo = <span class="function">(<span class="params">&#123;dispatch&#125;</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> input</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">        &lt;header className=<span class="string">"header"</span>&gt;</div><div class="line">            &lt;h1&gt;Todos&lt;<span class="regexp">/h1&gt;</span></div><div class="line"><span class="regexp">            &lt;input onKeyDown=&#123;(e) =&gt; &#123;</span></div><div class="line"><span class="regexp">                    if (input.value &amp;&amp; e.keyCode === 13) &#123;</span></div><div class="line"><span class="regexp">                        dispatch(addTodo(input.value))</span></div><div class="line"><span class="regexp">                        input.value = ''</span></div><div class="line"><span class="regexp">                    &#125;</span></div><div class="line"><span class="regexp">                    &#125;&#125;</span></div><div class="line"><span class="regexp">                    ref=&#123;node =&gt; input = node&#125;</span></div><div class="line"><span class="regexp">            className="new-todo" placeholder="æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ" autoFocus /</span>&gt;</div><div class="line">        &lt;<span class="regexp">/header&gt;</span></div><div class="line"><span class="regexp">    )</span></div><div class="line"><span class="regexp">&#125;;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">AddTodo = connect()(AddTodo)</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default AddTodo;</span></div></pre></td></tr></table></figure>
<p>ä¿®æ”¹å…¥å£ä¸»æ–‡ä»¶<strong>TodoApp.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React    <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> AddTodo  <span class="keyword">from</span> <span class="string">'../Containers/AddTodo'</span>;</div><div class="line"><span class="keyword">import</span> VisibleTodoList <span class="keyword">from</span> <span class="string">'../Containers/VisibleTodoList'</span>;</div><div class="line"><span class="keyword">import</span> Footer   <span class="keyword">from</span> <span class="string">'./Footer'</span>;</div><div class="line"><span class="keyword">import</span> todos    <span class="keyword">from</span> <span class="string">'../store.js'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">'todomvc-app-css/index.css'</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> TodoApp = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    &lt;section className=<span class="string">"todoapp"</span>&gt;</div><div class="line">        &lt;AddTodo/&gt;</div><div class="line">        &lt;VisibleTodoList/&gt;</div><div class="line">        &lt;Footer/&gt;</div><div class="line">    &lt;<span class="regexp">/section&gt;</span></div><div class="line"><span class="regexp">);</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default TodoApp;</span></div></pre></td></tr></table></figure>
<p>ä¿®æ”¹æ¸²æŸ“æ–‡ä»¶index.jsï¼Œè®©å…¶æ¸²æŸ“æœ€å¤–å±‚çš„<strong>Root.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div><div class="line"><span class="keyword">import</span> Root <span class="keyword">from</span> <span class="string">'./Components/Root'</span>;</div><div class="line"></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Root</span> /&gt;</span>, document.getElementById('root'));</span></div></pre></td></tr></table></figure>
<h3 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h3><p>react å®ç°è·¯ç”±éœ€è¦ç”¨åˆ°å‰ç«¯è·¯ç”±çš„æŠ€æœ¯ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨react-router4.0ã€‚æˆ‘ä»¬éœ€è¦ç”¨åˆ°å¯¼èˆªçš„ä¿¡æ¯ï¼Œæ¥æ˜¾ç¤ºä½•ç§å¾…åŠäº‹é¡¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»¥è·¯ç”±å‚æ•°æ¥è®¾ç½®è·¯å¾„ï¼Œæ˜¾ç¤ºæ‰€æœ‰å¾…åŠäº‹é¡¹åœ¨æ ¹è·¯å¾„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install react-router react-router-dom --save</div></pre></td></tr></table></figure>
<p>åœ¨<strong>Root.js</strong>ä¸­å¼•å…¥react-routerï¼Œéœ€è¦ç”¨åˆ°çš„ç»„ä»¶æœ‰ BrowserRouter å’Œ Routeã€‚ç„¶åæ”¾ç½®åœ¨Providerç»„ä»¶ä¹‹å†…ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">    BrowserRouter <span class="keyword">as</span> Router,</div><div class="line">    Route</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</div><div class="line"><span class="keyword">import</span> TodoApp <span class="keyword">from</span> <span class="string">'./TodoApp'</span>;</div><div class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Root = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">       &lt;Provider store=&#123;store&#125;&gt;</div><div class="line">           &lt;Router&gt;</div><div class="line">               &lt;Route path=<span class="string">'/:filter?'</span> component=&#123;TodoApp&#125;/&gt;</div><div class="line">           &lt;<span class="regexp">/Router&gt;</span></div><div class="line"><span class="regexp">        &lt;/</span>Provider&gt;</div><div class="line">    );</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Root;</div></pre></td></tr></table></figure>
<p>åœ¨åº•éƒ¨å¯¼èˆª<strong>Link.js</strong>ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŠŠåº•éƒ¨å¯¼èˆªåŠ ä¸ŠNavLinkç»„ä»¶ï¼Œå¹¶æŠŠfilterå‚æ•°ä¼ é€’åˆ°toå±æ€§å½“ä¸­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; NavLink &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Link = <span class="function">(<span class="params">&#123; filter, children &#125;</span>) =&gt;</span> (</div><div class="line">    &lt;li&gt;</div><div class="line">        &lt;NavLink to=&#123;<span class="string">"/"</span> + filter&#125;&gt;&#123;children&#125;&lt;<span class="regexp">/NavLink&gt;</span></div><div class="line"><span class="regexp">    &lt;/</span>li&gt;</div><div class="line">);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Link;</div></pre></td></tr></table></figure>
<p>åœ¨srcåˆ›å»º<strong>Selector.js</strong>ï¼Œselectorç»“æ„å’Œreducerå¾ˆåƒï¼Œä½†ä¸ä¼šæ”¹å˜åº”ç”¨æ›´æ”¹çš„æ•°æ®çŠ¶æ€ï¼Œæ›´å…·ä¼ å…¥çš„å‚æ•°è¿”å›stateçš„éƒ¨åˆ†å†…å®¹ã€‚selectoræ¥æ”¶2ä¸ªå‚æ•°ï¼Œstateå’Œfilterã€‚åŒæ ·ä¹Ÿæ˜¯switcçš„ç»“æ„ï¼Œæ›´å…·ä¸åŒçš„filterç±»å‹å¤„ç†è¿”å›æ–°çš„stateæ•°æ®ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getVisibleTodos = <span class="function">(<span class="params">state, filter</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">switch</span>(filter) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'all'</span>:</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">        <span class="keyword">case</span> <span class="string">'active'</span>:</div><div class="line">            <span class="keyword">return</span> state.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed);</div><div class="line">        <span class="keyword">case</span> <span class="string">'completed'</span>:</div><div class="line">            <span class="keyword">return</span> state.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed);</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> getVisibleTodos;</div></pre></td></tr></table></figure>
<p>åœ¨<strong>VisibleTodoList.js</strong>ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°è·¯ç”±çš„å‚æ•°ï¼Œå¹¶ä¸”éœ€è¦é€šè¿‡è·¯ç”±çš„ä¿¡æ¯ï¼Œé‡æ–°åˆ‡æ¢å±•ç¤ºå‡ºå¾…åŠäº‹é¡¹ã€‚æ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨withRouteræ¥ç”Ÿæˆæ–°çš„å®¹å™¨ç»„ä»¶ã€‚reater-routerå®Œå…¨å…¼å®¹reduxï¼Œåªéœ€è¦åœ¨reduxçš„connectå¤–é¢å¥—ä¸Šå³å¯ã€‚å¼•å…¥æˆ‘ä»¬å·²ç»ç¼–å†™å·çš„selectorï¼Œä¿®æ”¹mapStateToProps,å°†todoè®¾ç½®ä¸ºè¢«selectorè®¾ç½®è¿‡æ»¤åçš„å€¼ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°ä¿å­˜åœ¨matchå¯¹è±¡ä¸­çš„è·¯ç”±å‚æ•°ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ä¸ºallã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">'react-router'</span>;</div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../Components/TodoList'</span>;</div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../action'</span>;</div><div class="line"><span class="keyword">import</span> getVisibleTodos <span class="keyword">from</span> <span class="string">'../selector'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, &#123;match&#125;</span>) =&gt;</span> (&#123;</div><div class="line">    todos: getVisibleTodos(</div><div class="line">        state,</div><div class="line">        match.params.filter || <span class="string">"all"</span></div><div class="line">    )</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> (&#123;</div><div class="line">    onTodoClick: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">        dispatch(toggleTodo(id));</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = withRouter(connect(</div><div class="line">    mapStateToProps,</div><div class="line">    mapDispatchToProps</div><div class="line">)(TodoList));</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList;</div></pre></td></tr></table></figure>
<p>å°ç»“ï¼š</p>
<p>æˆ‘ä»¬å»ºç«‹äº†2ä¸ªæ–‡ä»¶å¤¹ï¼ŒComponentså’ŒContainersï¼Œå±•ç¤ºç»„ä»¶è´Ÿè´£ç•Œé¢çš„ç»“æ„æ ·å¼ï¼Œå®¹å™¨ç»„ä»¶è´Ÿè´£å¤„ç†æ•°æ®äº¤äº’ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„ç†æ¸…æˆ‘ä»¬ä¸šåŠ¡çš„é€»è¾‘ï¼Œä¹Ÿæ–¹ä¾¿å¼€å‘ç»´æŠ¤ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨reduxæ¥è¿›è¡Œåº”ç”¨çš„çŠ¶æ€ç®¡ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‰ä¸ªç‹¬ç«‹çš„æ–‡ä»¶æ¥å¤„ç†åº”ç”¨çŠ¶æ€æ•°æ® action.js ã€reducer.jsã€store.jsã€‚actionå¯¹åº”è¿™æˆ‘ä»¬é¡µé¢çš„æ¯ä¸€ä¸ªåŠŸèƒ½ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦å®ç°äº†æ·»åŠ äº‹é¡¹å’Œæ ‡è®°äº‹é¡¹æ˜¯å¦å®Œæˆçš„çŠ¶æ€çš„åŠŸèƒ½ï¼Œreducerä¸­ä¸€ä¸ªå¤„ç†æ•°ç»„ä¸­çš„æ•°æ®å’Œå¦ä¸€ä¸ªè´Ÿè´£å¤„ç†å•ç‹¬çš„todoå¯¹è±¡ï¼Œé€šè¿‡createStoreçš„æ–¹æ³•ç”Ÿæˆstoreã€‚ä½¿ç”¨react-routerå®ç°å‰ç«¯è·¯ç”±çš„åŠŸèƒ½ï¼Œæœ€å¸¸ä½¿ç”¨çš„ç»„ä»¶BrowserRouterã€Routeã€Linkã€‚ä¸ºäº†åˆ‡æ¢æ˜¾ç¤ºä¸åŒçŠ¶æ€çš„æ•ˆæœï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨åˆ°äº†è·¯ç”±å‚æ•°ï¼Œé€šè¿‡withRouterçš„æ–¹æ³•ä¼ é€’åˆ°ç›®æ ‡ç»„ä»¶çš„æ–¹æ³•å½“ä¸­ï¼Œé€šè¿‡matchå¯¹è±¡é‡Œè·å–åˆ°å…·ä½“çš„è·¯ç”±å‚æ•°ã€‚æ‹¿åˆ°è·¯ç”±å‚æ•°åï¼Œé€šè¿‡reduxçš„selectoræ–¹æ³•æ¥æœ‰é€‰æ‹©æ€§çš„å±•ç¤ºæ•°æ®ã€‚</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/10/cssjm2/" rel="next" title="CSS æ­ç§˜ï¼ˆäºŒï¼‰å½¢çŠ¶">
                <i class="fa fa-chevron-left"></i> CSS æ­ç§˜ï¼ˆäºŒï¼‰å½¢çŠ¶
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="JaxChu" />
            
              <p class="site-author-name" itemprop="name">JaxChu</p>
              <p class="site-description motion-element" itemprop="description">FE@JKXY</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¦‚è¿°"><span class="nav-number">1.</span> <span class="nav-text">æ¦‚è¿°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¯å¢ƒæ­å»º"><span class="nav-number">2.</span> <span class="nav-text">ç¯å¢ƒæ­å»º</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç»„å»ºå¼€å‘"><span class="nav-number">3.</span> <span class="nav-text">ç»„å»ºå¼€å‘</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSXå…¥é—¨"><span class="nav-number">3.1.</span> <span class="nav-text">JSXå…¥é—¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»„ä»¶"><span class="nav-number">3.2.</span> <span class="nav-text">ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å…ƒç´ ä¸ç»„ä»¶-Element-amp-Component"><span class="nav-number">3.2.1.</span> <span class="nav-text">å…ƒç´ ä¸ç»„ä»¶ Element & Component</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Reactå…ƒç´ "><span class="nav-number">3.2.1.1.</span> <span class="nav-text">Reactå…ƒç´ </span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ç»„ä»¶-1"><span class="nav-number">3.2.1.2.</span> <span class="nav-text">ç»„ä»¶</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å‡½æ•°å®šä¹‰ä¸ç±»å®šä¹‰ç»„ä»¶-Functional-amp-Class"><span class="nav-number">3.2.2.</span> <span class="nav-text">å‡½æ•°å®šä¹‰ä¸ç±»å®šä¹‰ç»„ä»¶ Functional & Class</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å±•ç¤ºä¸å®¹å™¨ç»„ä»¶-Presentational-amp-Container"><span class="nav-number">3.2.3.</span> <span class="nav-text">å±•ç¤ºä¸å®¹å™¨ç»„ä»¶ Presentational & Container</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€ç»„ä»¶-Stateful-amp-Stateless"><span class="nav-number">3.2.4.</span> <span class="nav-text">æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€ç»„ä»¶ Stateful & Stateless</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å—æ§ä¸éå—æ§ç»„ä»¶-Controlled-amp-Uncontrolled"><span class="nav-number">3.2.5.</span> <span class="nav-text">å—æ§ä¸éå—æ§ç»„ä»¶ Controlled & Uncontrolled</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç»„åˆä¸ç»§æ‰¿-Composition-amp-Inheritance"><span class="nav-number">3.2.6.</span> <span class="nav-text">ç»„åˆä¸ç»§æ‰¿ Composition & Inheritance</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»„ä»¶æ•°æ®"><span class="nav-number">3.3.</span> <span class="nav-text">ç»„ä»¶æ•°æ®</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Props"><span class="nav-number">3.3.1.</span> <span class="nav-text">Props</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#State"><span class="nav-number">3.3.2.</span> <span class="nav-text">State</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#context"><span class="nav-number">3.3.3.</span> <span class="nav-text">context</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><span class="nav-number">3.4.</span> <span class="nav-text">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#React-æ˜¯å¦‚ä½•æ¸²æŸ“ç»„ä»¶çš„ï¼Ÿ"><span class="nav-number">3.4.1.</span> <span class="nav-text">React æ˜¯å¦‚ä½•æ¸²æŸ“ç»„ä»¶çš„ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è¡¨å•åŠäº‹ä»¶å¤„ç†"><span class="nav-number">3.5.</span> <span class="nav-text">è¡¨å•åŠäº‹ä»¶å¤„ç†</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redux-æ•°æ®å¤„ç†"><span class="nav-number">4.</span> <span class="nav-text">Redux æ•°æ®å¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Reduxç®€ä»‹"><span class="nav-number">4.1.</span> <span class="nav-text">Reduxç®€ä»‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Action"><span class="nav-number">4.2.</span> <span class="nav-text">Action</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reducer"><span class="nav-number">4.3.</span> <span class="nav-text">Reducer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Store"><span class="nav-number">4.4.</span> <span class="nav-text">Store</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Middleware"><span class="nav-number">4.5.</span> <span class="nav-text">Middleware</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#react-redux"><span class="nav-number">4.6.</span> <span class="nav-text">react-redux</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react-router-4"><span class="nav-number">5.</span> <span class="nav-text">react-router 4</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç®€ä»‹"><span class="nav-number">5.1.</span> <span class="nav-text">ç®€ä»‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é…ç½®"><span class="nav-number">5.2.</span> <span class="nav-text">é…ç½®</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#BrowserRouter"><span class="nav-number">5.2.1.</span> <span class="nav-text">BrowserRouter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Route"><span class="nav-number">5.2.2.</span> <span class="nav-text">Route</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Link"><span class="nav-number">5.2.3.</span> <span class="nav-text">Link</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS"><span class="nav-number">6.</span> <span class="nav-text">CSS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cssæ ·å¼ç¼–å†™çš„æ–¹æ³•"><span class="nav-number">6.1.</span> <span class="nav-text">cssæ ·å¼ç¼–å†™çš„æ–¹æ³•</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Modules-Sass-PostCSS-åœ¨Reacté¡¹ç›®ä¸­çš„åº”ç”¨"><span class="nav-number">6.1.1.</span> <span class="nav-text">Modules/Sass/PostCSS åœ¨Reacté¡¹ç›®ä¸­çš„åº”ç”¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Modules"><span class="nav-number">6.1.2.</span> <span class="nav-text">Modules</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sass"><span class="nav-number">6.1.3.</span> <span class="nav-text">sass</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#postcss"><span class="nav-number">6.1.4.</span> <span class="nav-text">postcss</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®æˆ˜TodoList"><span class="nav-number">7.</span> <span class="nav-text">å®æˆ˜TodoList</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å¼€å‘å‰å‡†å¤‡"><span class="nav-number">7.1.</span> <span class="nav-text">å¼€å‘å‰å‡†å¤‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»„ä»¶å¼€å‘"><span class="nav-number">7.2.</span> <span class="nav-text">ç»„ä»¶å¼€å‘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ ·å¼"><span class="nav-number">7.3.</span> <span class="nav-text">æ ·å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ•°æ®å¤„ç†"><span class="nav-number">7.4.</span> <span class="nav-text">æ•°æ®å¤„ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·¯ç”±é…ç½®"><span class="nav-number">7.5.</span> <span class="nav-text">è·¯ç”±é…ç½®</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JaxChu</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  

  

  

</body>
</html>
